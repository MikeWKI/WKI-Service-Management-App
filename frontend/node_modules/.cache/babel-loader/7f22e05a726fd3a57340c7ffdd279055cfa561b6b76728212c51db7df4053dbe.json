{"ast":null,"code":"import _objectSpread from\"C:/Users/michaela/service-management-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const initialState={global:false,operations:new Map(),progress:new Map()};function loadingReducer(state,action){var _action$payload,_action$payload2,_action$payload3,_action$payload4,_action$payload5;switch(action.type){case'START_LOADING':const newOperations=new Map(state.operations);if((_action$payload=action.payload)!==null&&_action$payload!==void 0&&_action$payload.operation){newOperations.set(action.payload.operation,true);}return _objectSpread(_objectSpread({},state),{},{global:(_action$payload2=action.payload)!==null&&_action$payload2!==void 0&&_action$payload2.operation?state.global:true,operations:newOperations});case'STOP_LOADING':const updatedOperations=new Map(state.operations);const updatedProgress=new Map(state.progress);if((_action$payload3=action.payload)!==null&&_action$payload3!==void 0&&_action$payload3.operation){updatedOperations.delete(action.payload.operation);updatedProgress.delete(action.payload.operation);}return _objectSpread(_objectSpread({},state),{},{global:(_action$payload4=action.payload)!==null&&_action$payload4!==void 0&&_action$payload4.operation?state.global:false,operations:updatedOperations,progress:updatedProgress});case'SET_PROGRESS':if(!((_action$payload5=action.payload)!==null&&_action$payload5!==void 0&&_action$payload5.operation))return state;const progressMap=new Map(state.progress);progressMap.set(action.payload.operation,action.payload.progress||0);return _objectSpread(_objectSpread({},state),{},{progress:progressMap});case'RESET_ALL':return initialState;default:return state;}}const LoadingContext=/*#__PURE__*/createContext(null);export const LoadingProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(loadingReducer,initialState);const startLoading=operation=>{dispatch({type:'START_LOADING',payload:{operation}});};const stopLoading=operation=>{dispatch({type:'STOP_LOADING',payload:{operation}});};const setProgress=(operation,progress)=>{dispatch({type:'SET_PROGRESS',payload:{operation,progress}});};const isLoading=operation=>{if(!operation)return state.global||state.operations.size>0;return state.operations.get(operation)||false;};const getProgress=operation=>{return state.progress.get(operation)||0;};const resetAll=()=>{dispatch({type:'RESET_ALL'});};return/*#__PURE__*/_jsx(LoadingContext.Provider,{value:{state,startLoading,stopLoading,setProgress,isLoading,getProgress,resetAll},children:children});};export const useLoading=()=>{const context=useContext(LoadingContext);if(!context){throw new Error('useLoading must be used within LoadingProvider');}return context;};// Global Loading Bar Component\nexport const GlobalLoadingBar=()=>{const{isLoading}=useLoading();const hasAnyLoading=isLoading();if(!hasAnyLoading)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-0 left-0 w-full h-1 bg-gray-200 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-red-500 to-red-600 animate-pulse transition-all duration-300\",style:{width:'70%'}})});};","map":{"version":3,"names":["React","createContext","useContext","useReducer","jsx","_jsx","initialState","global","operations","Map","progress","loadingReducer","state","action","_action$payload","_action$payload2","_action$payload3","_action$payload4","_action$payload5","type","newOperations","payload","operation","set","_objectSpread","updatedOperations","updatedProgress","delete","progressMap","LoadingContext","LoadingProvider","_ref","children","dispatch","startLoading","stopLoading","setProgress","isLoading","size","get","getProgress","resetAll","Provider","value","useLoading","context","Error","GlobalLoadingBar","hasAnyLoading","className","style","width"],"sources":["C:/Users/michaela/service-management-app/frontend/src/contexts/LoadingContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useReducer, ReactNode } from 'react';\r\n\r\ninterface LoadingState {\r\n  global: boolean;\r\n  operations: Map<string, boolean>;\r\n  progress: Map<string, number>;\r\n}\r\n\r\ninterface LoadingAction {\r\n  type: 'START_LOADING' | 'STOP_LOADING' | 'SET_PROGRESS' | 'RESET_ALL';\r\n  payload?: {\r\n    operation?: string;\r\n    progress?: number;\r\n  };\r\n}\r\n\r\nconst initialState: LoadingState = {\r\n  global: false,\r\n  operations: new Map(),\r\n  progress: new Map()\r\n};\r\n\r\nfunction loadingReducer(state: LoadingState, action: LoadingAction): LoadingState {\r\n  switch (action.type) {\r\n    case 'START_LOADING':\r\n      const newOperations = new Map(state.operations);\r\n      if (action.payload?.operation) {\r\n        newOperations.set(action.payload.operation, true);\r\n      }\r\n      return {\r\n        ...state,\r\n        global: action.payload?.operation ? state.global : true,\r\n        operations: newOperations\r\n      };\r\n\r\n    case 'STOP_LOADING':\r\n      const updatedOperations = new Map(state.operations);\r\n      const updatedProgress = new Map(state.progress);\r\n      \r\n      if (action.payload?.operation) {\r\n        updatedOperations.delete(action.payload.operation);\r\n        updatedProgress.delete(action.payload.operation);\r\n      }\r\n      \r\n      return {\r\n        ...state,\r\n        global: action.payload?.operation ? state.global : false,\r\n        operations: updatedOperations,\r\n        progress: updatedProgress\r\n      };\r\n\r\n    case 'SET_PROGRESS':\r\n      if (!action.payload?.operation) return state;\r\n      \r\n      const progressMap = new Map(state.progress);\r\n      progressMap.set(action.payload.operation, action.payload.progress || 0);\r\n      \r\n      return {\r\n        ...state,\r\n        progress: progressMap\r\n      };\r\n\r\n    case 'RESET_ALL':\r\n      return initialState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst LoadingContext = createContext<{\r\n  state: LoadingState;\r\n  startLoading: (operation?: string) => void;\r\n  stopLoading: (operation?: string) => void;\r\n  setProgress: (operation: string, progress: number) => void;\r\n  isLoading: (operation?: string) => boolean;\r\n  getProgress: (operation: string) => number;\r\n  resetAll: () => void;\r\n} | null>(null);\r\n\r\nexport const LoadingProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [state, dispatch] = useReducer(loadingReducer, initialState);\r\n\r\n  const startLoading = (operation?: string) => {\r\n    dispatch({ type: 'START_LOADING', payload: { operation } });\r\n  };\r\n\r\n  const stopLoading = (operation?: string) => {\r\n    dispatch({ type: 'STOP_LOADING', payload: { operation } });\r\n  };\r\n\r\n  const setProgress = (operation: string, progress: number) => {\r\n    dispatch({ type: 'SET_PROGRESS', payload: { operation, progress } });\r\n  };\r\n\r\n  const isLoading = (operation?: string) => {\r\n    if (!operation) return state.global || state.operations.size > 0;\r\n    return state.operations.get(operation) || false;\r\n  };\r\n\r\n  const getProgress = (operation: string) => {\r\n    return state.progress.get(operation) || 0;\r\n  };\r\n\r\n  const resetAll = () => {\r\n    dispatch({ type: 'RESET_ALL' });\r\n  };\r\n\r\n  return (\r\n    <LoadingContext.Provider value={{\r\n      state,\r\n      startLoading,\r\n      stopLoading,\r\n      setProgress,\r\n      isLoading,\r\n      getProgress,\r\n      resetAll\r\n    }}>\r\n      {children}\r\n    </LoadingContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useLoading = () => {\r\n  const context = useContext(LoadingContext);\r\n  if (!context) {\r\n    throw new Error('useLoading must be used within LoadingProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// Global Loading Bar Component\r\nexport const GlobalLoadingBar: React.FC = () => {\r\n  const { isLoading } = useLoading();\r\n  const hasAnyLoading = isLoading();\r\n\r\n  if (!hasAnyLoading) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-0 left-0 w-full h-1 bg-gray-200 z-50\">\r\n      <div className=\"h-full bg-gradient-to-r from-red-500 to-red-600 animate-pulse transition-all duration-300\" \r\n           style={{ width: '70%' }} />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}