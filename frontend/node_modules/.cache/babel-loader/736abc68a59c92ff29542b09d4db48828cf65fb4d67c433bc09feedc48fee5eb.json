{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{MapPin,TrendingUp,TrendingDown,BarChart3,Calendar,Filter,RefreshCw,Building}from'lucide-react';import{Link}from'react-router-dom';// Legitimate scorecard data interface - matches W370 Service Scorecard structure\n// Dealership-level metrics interface\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const locations=[{id:'wichita',name:'Wichita',color:'from-blue-500 to-blue-600'},{id:'emporia',name:'Emporia',color:'from-green-500 to-green-600'},{id:'dodge-city',name:'Dodge City',color:'from-purple-500 to-purple-600'},{id:'liberal',name:'Liberal',color:'from-orange-500 to-orange-600'}];export default function LocationMetrics(){const[selectedLocation,setSelectedLocation]=useState('all');const[selectedMetric,setSelectedMetric]=useState('vscCaseRequirements');const[backendMetrics,setBackendMetrics]=useState([]);const[dealershipMetrics,setDealershipMetrics]=useState(null);const[isLoading,setIsLoading]=useState(true);const[lastUpdated,setLastUpdated]=useState(null);// Backend API base URL\nconst API_BASE_URL='https://wki-service-management-app.onrender.com';// Fetch data from backend\nconst fetchData=useCallback(async()=>{setIsLoading(true);try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/locationMetrics\"));if(response.ok){const data=await response.json();let dealership,locations=[],extractedAt;// Handle different response structures\nif(data&&typeof data==='object'){if('dealership'in data&&'locations'in data){({dealership,locations,extractedAt}=data);}else if('data'in data&&data.data&&typeof data.data==='object'){if('dealership'in data.data&&'locations'in data.data){({dealership,locations,extractedAt}=data.data);}}}if(locations&&locations.length>0){// Convert backend data to frontend format - only legitimate W370 scorecard fields\nconst convertedMetrics=locations.map(location=>{var _location$vscCaseRequ,_location$vscClosedCo,_location$ttActivatio,_location$triagePerce,_location$percentCase,_location$rdsMonthlyA;return{location:location.name,month:'Latest',year:new Date().getFullYear(),metrics:{vscCaseRequirements:parseFloat((_location$vscCaseRequ=location.vscCaseRequirements)===null||_location$vscCaseRequ===void 0?void 0:_location$vscCaseRequ.toString().replace('%',''))||0,vscClosedCorrectly:parseFloat((_location$vscClosedCo=location.vscClosedCorrectly)===null||_location$vscClosedCo===void 0?void 0:_location$vscClosedCo.toString().replace('%',''))||0,ttActivation:parseFloat((_location$ttActivatio=location.ttActivation)===null||_location$ttActivatio===void 0?void 0:_location$ttActivatio.toString().replace('%',''))||0,smMonthlyDwellAvg:parseFloat(location.smMonthlyDwellAvg)||0,triageHours:parseFloat(location.triageHours)||0,triagePercentLess4Hours:parseFloat((_location$triagePerce=location.triagePercentLess4Hours)===null||_location$triagePerce===void 0?void 0:_location$triagePerce.toString().replace('%',''))||0,etrPercentCases:parseFloat(location.etrPercentCases)||0,percentCasesWith3Notes:parseFloat((_location$percentCase=location.percentCasesWith3Notes)===null||_location$percentCase===void 0?void 0:_location$percentCase.toString().replace('%',''))||0,rdsMonthlyAvgDays:parseFloat((_location$rdsMonthlyA=location.rdsMonthlyAvgDays)===null||_location$rdsMonthlyA===void 0?void 0:_location$rdsMonthlyA.toString().replace('%',''))||0,smYtdDwellAvgDays:parseFloat(location.smYtdDwellAvgDays)||0,rdsYtdDwellAvgDays:parseFloat(location.rdsYtdDwellAvgDays)||0},trend:'stable'};});setBackendMetrics(convertedMetrics);}else{// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);}// Set dealership-level metrics if available\nif(dealership){var _dealership$triagePer,_dealership$percentCa;setDealershipMetrics({triageHours:parseFloat(dealership.triageHours)||0,triagePercentLess4Hours:parseFloat((_dealership$triagePer=dealership.triagePercentLess4Hours)===null||_dealership$triagePer===void 0?void 0:_dealership$triagePer.toString().replace('%',''))||0,percentCasesWith3Notes:parseFloat((_dealership$percentCa=dealership.percentCasesWith3Notes)===null||_dealership$percentCa===void 0?void 0:_dealership$percentCa.toString().replace('%',''))||0});}else{setDealershipMetrics(null);}if(extractedAt){setLastUpdated(new Date(extractedAt).toLocaleString());}}else{// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);setDealershipMetrics(null);}}catch(error){console.error('Error fetching metrics:',error);// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);setDealershipMetrics(null);}finally{setIsLoading(false);}},[]);// Fetch data on mount\nuseEffect(()=>{fetchData();},[fetchData]);// Auto-refresh data every 30 seconds to catch new uploads\nuseEffect(()=>{const interval=setInterval(fetchData,30000);return()=>clearInterval(interval);},[fetchData]);// Listen for scorecard upload events for immediate refresh\nuseEffect(()=>{const handleScorecardUpload=()=>{console.log('LocationMetrics: New scorecard uploaded, refreshing data...');fetchData();};window.addEventListener('scorecardUploaded',handleScorecardUpload);return()=>{window.removeEventListener('scorecardUploaded',handleScorecardUpload);};},[fetchData]);const filteredMetrics=selectedLocation==='all'?backendMetrics:backendMetrics.filter(m=>m.location.toLowerCase().replace(/\\s+/g,'-')===selectedLocation);const metricDefinitions={vscCaseRequirements:{name:'VSC Case Requirements',unit:'%',description:'PACCAR VSC case requirements compliance',target:'> 95%',good:value=>value>95},vscClosedCorrectly:{name:'VSC Closed Correctly',unit:'%',description:'PACCAR VSC cases closed with proper procedures',target:'> 90%',good:value=>value>90},ttActivation:{name:'TT+ Activation',unit:'%',description:'TruckTech+ activation rate',target:'> 90%',good:value=>value>90},smMonthlyDwellAvg:{name:'SM Monthly Dwell Average',unit:'days',description:'Service management monthly dwell time average',target:'< 3 days',good:value=>value<3},triageHours:{name:'Triage Hours',unit:'hours',description:'Average hours for case triage completion',target:'< 2 hours',good:value=>value<2},triagePercentLess4Hours:{name:'Triage % < 4 Hours',unit:'%',description:'Percentage of cases triaged within 4 hours',target:'> 80%',good:value=>value>80},etrPercentCases:{name:'ETR % of Cases',unit:'%',description:'Estimated Time of Repair provided for cases',target:'< 5%',good:value=>value<5},percentCasesWith3Notes:{name:'% Cases with 3+ Notes',unit:'%',description:'Percentage of cases with 3 or more notes',target:'< 2%',good:value=>value<2},rdsMonthlyAvgDays:{name:'RDS Monthly Avg Days',unit:'days',description:'RDS (Repair Duration Summary) monthly average',target:'< 7 days',good:value=>value<7},smYtdDwellAvgDays:{name:'SM YTD Dwell Avg Days',unit:'days',description:'Service management year-to-date dwell average',target:'< 6 days',good:value=>value<6},rdsYtdDwellAvgDays:{name:'RDS YTD Dwell Avg Days',unit:'days',description:'RDS year-to-date dwell time average',target:'< 6 days',good:value=>value<6}};const getTrendIcon=trend=>{switch(trend){case'up':return/*#__PURE__*/_jsx(TrendingUp,{className:\"w-4 h-4 text-green-400\"});case'down':return/*#__PURE__*/_jsx(TrendingDown,{className:\"w-4 h-4 text-red-400\"});default:return/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 text-yellow-400\"});}};const getLocationColor=locationName=>{const location=locations.find(loc=>loc.name.toLowerCase()===locationName.toLowerCase());return(location===null||location===void 0?void 0:location.color)||'from-slate-500 to-slate-600';};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\",children:\"Location Performance Metrics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-slate-300\",children:\"Compare performance across all WKI service locations\"})]}),!isLoading&&backendMetrics.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"No Scorecard Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 mb-6\",children:\"No W370 Service Scorecard data has been uploaded yet. Upload a legitimate scorecard PDF to view location metrics.\"}),/*#__PURE__*/_jsx(Link,{to:\"/upload-scorecard\",className:\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200\",children:\"Upload Scorecard\"})]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-4\",children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Loading scorecard data...\"})]}),!isLoading&&backendMetrics.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[dealershipMetrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800 rounded-2xl p-6 mb-8 border border-blue-700 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Building,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Dealership Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-200\",children:\"Overall WKI performance metrics\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchData,disabled:isLoading,className:\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 \".concat(isLoading?'animate-spin':'')}),/*#__PURE__*/_jsx(\"span\",{children:\"Refresh\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"Triage Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.triageHours<2?'bg-green-500':dealershipMetrics.triageHours<4?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.triageHours,\" hrs\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: < 2 hrs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"Triage % < 4 Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.triagePercentLess4Hours>80?'bg-green-500':dealershipMetrics.triagePercentLess4Hours>60?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.triagePercentLess4Hours,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: > 80%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"% Cases with 3+ Notes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.percentCasesWith3Notes<2?'bg-green-500':dealershipMetrics.percentCasesWith3Notes<5?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.percentCasesWith3Notes,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: < 2%\"})]})]}),lastUpdated&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-xs text-blue-200 text-center\",children:[\"Last updated: \",lastUpdated]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-3 sm:p-6 mb-6 sm:mb-8 border border-slate-700 shadow-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-4 items-stretch sm:items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-5 h-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Location\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedLocation,onChange:e=>setSelectedLocation(e.target.value),className:\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Locations\"}),locations.map(location=>/*#__PURE__*/_jsx(\"option\",{value:location.id,children:location.name},location.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Focus Metric\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedMetric,onChange:e=>setSelectedMetric(e.target.value),className:\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\",children:Object.entries(metricDefinitions).map(_ref=>{let[key,def]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:def.name},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Latest Data\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),\"July 2025\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 min-w-[400px] sm:min-w-0 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8\",children:Object.entries(metricDefinitions).map(_ref2=>{let[key,def]=_ref2;const avgValue=filteredMetrics.reduce((sum,m)=>sum+m.metrics[key],0)/filteredMetrics.length;const isGood=def.good(avgValue);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-3 sm:p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-semibold text-sm\",children:def.name}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(isGood?'bg-green-900 text-green-300':'bg-red-900 text-red-300'),children:def.target})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[avgValue.toFixed(1),def.unit]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-xs\",children:def.description})]},key);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4 sm:gap-6\",children:filteredMetrics.map(locationData=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-8 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br \".concat(getLocationColor(locationData.location),\" rounded-full flex items-center justify-center shadow-lg\"),children:/*#__PURE__*/_jsx(MapPin,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:locationData.location}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),locationData.month,\" \",locationData.year]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[getTrendIcon(locationData.trend),/*#__PURE__*/_jsxs(\"span\",{className:\"text-slate-300 capitalize\",children:[locationData.trend,\" trend\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 min-w-[350px] sm:min-w-0 md:grid-cols-4 gap-2 sm:gap-6\",children:Object.entries(locationData.metrics).map(_ref3=>{let[key,value]=_ref3;const def=metricDefinitions[key];const isGood=def.good(value);const isSelected=key===selectedMetric;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 sm:p-4 rounded-lg border transition-all \".concat(isSelected?'border-red-500 bg-red-500/10 shadow-lg':'border-slate-700 bg-slate-800/50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-slate-300 text-sm font-medium\",children:def.name}),/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 rounded-full \".concat(isGood?'bg-green-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-base sm:text-xl font-bold \".concat(isGood?'text-green-400':'text-red-400'),children:[value.toFixed(1),def.unit]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1\",children:[\"Target: \",def.target]})]},key);})})})]},\"\".concat(locationData.location,\"-\").concat(locationData.month)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 sm:mt-8 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Performance Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='up').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Improving\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-yellow-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='stable').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Stable\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-red-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='down').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Need Attention\"})]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","MapPin","TrendingUp","TrendingDown","BarChart3","Calendar","Filter","RefreshCw","Building","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","locations","id","name","color","LocationMetrics","selectedLocation","setSelectedLocation","selectedMetric","setSelectedMetric","backendMetrics","setBackendMetrics","dealershipMetrics","setDealershipMetrics","isLoading","setIsLoading","lastUpdated","setLastUpdated","API_BASE_URL","fetchData","response","fetch","concat","ok","data","json","dealership","extractedAt","length","convertedMetrics","map","location","_location$vscCaseRequ","_location$vscClosedCo","_location$ttActivatio","_location$triagePerce","_location$percentCase","_location$rdsMonthlyA","month","year","Date","getFullYear","metrics","vscCaseRequirements","parseFloat","toString","replace","vscClosedCorrectly","ttActivation","smMonthlyDwellAvg","triageHours","triagePercentLess4Hours","etrPercentCases","percentCasesWith3Notes","rdsMonthlyAvgDays","smYtdDwellAvgDays","rdsYtdDwellAvgDays","trend","_dealership$triagePer","_dealership$percentCa","toLocaleString","error","console","interval","setInterval","clearInterval","handleScorecardUpload","log","window","addEventListener","removeEventListener","filteredMetrics","filter","m","toLowerCase","metricDefinitions","unit","description","target","good","value","getTrendIcon","className","getLocationColor","locationName","find","loc","children","to","onClick","disabled","onChange","e","Object","entries","_ref","key","def","_ref2","avgValue","reduce","sum","isGood","toFixed","locationData","_ref3","isSelected"],"sources":["C:/Users/michaela/service-management-app/frontend/src/components/LocationMetrics.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { MapPin, TrendingUp, TrendingDown, BarChart3, Calendar, Filter, RefreshCw, Building } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Legitimate scorecard data interface - matches W370 Service Scorecard structure\r\ninterface LocationMetrics {\r\n  location: string;\r\n  month: string;\r\n  year: number;\r\n  metrics: {\r\n    // Only include metrics that actually exist in the W370 Service Scorecard\r\n    vscCaseRequirements: number;\r\n    vscClosedCorrectly: number;\r\n    ttActivation: number;\r\n    smMonthlyDwellAvg: number;\r\n    triageHours: number;\r\n    triagePercentLess4Hours: number;\r\n    etrPercentCases: number;\r\n    percentCasesWith3Notes: number;\r\n    rdsMonthlyAvgDays: number;\r\n    smYtdDwellAvgDays: number;\r\n    rdsYtdDwellAvgDays: number;\r\n  };\r\n  trend: 'up' | 'down' | 'stable';\r\n}\r\n\r\n// Dealership-level metrics interface\r\ninterface DealershipMetrics {\r\n  triageHours: number;\r\n  triagePercentLess4Hours: number;\r\n  percentCasesWith3Notes: number;\r\n}\r\n\r\nconst locations = [\r\n  { id: 'wichita', name: 'Wichita', color: 'from-blue-500 to-blue-600' },\r\n  { id: 'emporia', name: 'Emporia', color: 'from-green-500 to-green-600' },\r\n  { id: 'dodge-city', name: 'Dodge City', color: 'from-purple-500 to-purple-600' },\r\n  { id: 'liberal', name: 'Liberal', color: 'from-orange-500 to-orange-600' }\r\n];\r\n\r\nexport default function LocationMetrics() {\r\n  const [selectedLocation, setSelectedLocation] = useState('all');\r\n  const [selectedMetric, setSelectedMetric] = useState('vscCaseRequirements');\r\n  const [backendMetrics, setBackendMetrics] = useState<LocationMetrics[]>([]);\r\n  const [dealershipMetrics, setDealershipMetrics] = useState<DealershipMetrics | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [lastUpdated, setLastUpdated] = useState<string | null>(null);\r\n\r\n  // Backend API base URL\r\n  const API_BASE_URL = 'https://wki-service-management-app.onrender.com';\r\n\r\n  // Fetch data from backend\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/locationMetrics`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        let dealership: any, locations: any[] = [], extractedAt: string | undefined;\r\n        \r\n        // Handle different response structures\r\n        if (data && typeof data === 'object') {\r\n          if ('dealership' in data && 'locations' in data) {\r\n            ({ dealership, locations, extractedAt } = data);\r\n          } else if ('data' in data && data.data && typeof data.data === 'object') {\r\n            if ('dealership' in data.data && 'locations' in data.data) {\r\n              ({ dealership, locations, extractedAt } = data.data);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (locations && locations.length > 0) {\r\n          // Convert backend data to frontend format - only legitimate W370 scorecard fields\r\n          const convertedMetrics: LocationMetrics[] = locations.map((location: any) => ({\r\n            location: location.name,\r\n            month: 'Latest',\r\n            year: new Date().getFullYear(),\r\n            metrics: {\r\n              vscCaseRequirements: parseFloat(location.vscCaseRequirements?.toString().replace('%', '')) || 0,\r\n              vscClosedCorrectly: parseFloat(location.vscClosedCorrectly?.toString().replace('%', '')) || 0,\r\n              ttActivation: parseFloat(location.ttActivation?.toString().replace('%', '')) || 0,\r\n              smMonthlyDwellAvg: parseFloat(location.smMonthlyDwellAvg) || 0,\r\n              triageHours: parseFloat(location.triageHours) || 0,\r\n              triagePercentLess4Hours: parseFloat(location.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n              etrPercentCases: parseFloat(location.etrPercentCases) || 0,\r\n              percentCasesWith3Notes: parseFloat(location.percentCasesWith3Notes?.toString().replace('%', '')) || 0,\r\n              rdsMonthlyAvgDays: parseFloat(location.rdsMonthlyAvgDays?.toString().replace('%', '')) || 0,\r\n              smYtdDwellAvgDays: parseFloat(location.smYtdDwellAvgDays) || 0,\r\n              rdsYtdDwellAvgDays: parseFloat(location.rdsYtdDwellAvgDays) || 0\r\n            },\r\n            trend: 'stable' as const\r\n          }));\r\n          setBackendMetrics(convertedMetrics);\r\n        } else {\r\n          // No legitimate scorecard data available - show empty state\r\n          setBackendMetrics([]);\r\n        }\r\n\r\n        // Set dealership-level metrics if available\r\n        if (dealership) {\r\n          setDealershipMetrics({\r\n            triageHours: parseFloat(dealership.triageHours) || 0,\r\n            triagePercentLess4Hours: parseFloat(dealership.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n            percentCasesWith3Notes: parseFloat(dealership.percentCasesWith3Notes?.toString().replace('%', '')) || 0\r\n          });\r\n        } else {\r\n          setDealershipMetrics(null);\r\n        }\r\n\r\n        if (extractedAt) {\r\n          setLastUpdated(new Date(extractedAt).toLocaleString());\r\n        }\r\n      } else {\r\n        // No legitimate scorecard data available - show empty state\r\n        setBackendMetrics([]);\r\n        setDealershipMetrics(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching metrics:', error);\r\n      // No legitimate scorecard data available - show empty state\r\n      setBackendMetrics([]);\r\n      setDealershipMetrics(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch data on mount\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  // Auto-refresh data every 30 seconds to catch new uploads\r\n  useEffect(() => {\r\n    const interval = setInterval(fetchData, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchData]);\r\n\r\n  // Listen for scorecard upload events for immediate refresh\r\n  useEffect(() => {\r\n    const handleScorecardUpload = () => {\r\n      console.log('LocationMetrics: New scorecard uploaded, refreshing data...');\r\n      fetchData();\r\n    };\r\n\r\n    window.addEventListener('scorecardUploaded', handleScorecardUpload);\r\n    return () => {\r\n      window.removeEventListener('scorecardUploaded', handleScorecardUpload);\r\n    };\r\n  }, [fetchData]);\r\n  const filteredMetrics = selectedLocation === 'all' \r\n    ? backendMetrics \r\n    : backendMetrics.filter(m => m.location.toLowerCase().replace(/\\s+/g, '-') === selectedLocation);\r\n\r\n  const metricDefinitions = {\r\n    vscCaseRequirements: {\r\n      name: 'VSC Case Requirements',\r\n      unit: '%',\r\n      description: 'PACCAR VSC case requirements compliance',\r\n      target: '> 95%',\r\n      good: (value: number) => value > 95\r\n    },\r\n    vscClosedCorrectly: {\r\n      name: 'VSC Closed Correctly',\r\n      unit: '%',\r\n      description: 'PACCAR VSC cases closed with proper procedures',\r\n      target: '> 90%',\r\n      good: (value: number) => value > 90\r\n    },\r\n    ttActivation: {\r\n      name: 'TT+ Activation',\r\n      unit: '%',\r\n      description: 'TruckTech+ activation rate',\r\n      target: '> 90%',\r\n      good: (value: number) => value > 90\r\n    },\r\n    smMonthlyDwellAvg: {\r\n      name: 'SM Monthly Dwell Average',\r\n      unit: 'days',\r\n      description: 'Service management monthly dwell time average',\r\n      target: '< 3 days',\r\n      good: (value: number) => value < 3\r\n    },\r\n    triageHours: {\r\n      name: 'Triage Hours',\r\n      unit: 'hours',\r\n      description: 'Average hours for case triage completion',\r\n      target: '< 2 hours',\r\n      good: (value: number) => value < 2\r\n    },\r\n    triagePercentLess4Hours: {\r\n      name: 'Triage % < 4 Hours',\r\n      unit: '%',\r\n      description: 'Percentage of cases triaged within 4 hours',\r\n      target: '> 80%',\r\n      good: (value: number) => value > 80\r\n    },\r\n    etrPercentCases: {\r\n      name: 'ETR % of Cases',\r\n      unit: '%',\r\n      description: 'Estimated Time of Repair provided for cases',\r\n      target: '< 5%',\r\n      good: (value: number) => value < 5\r\n    },\r\n    percentCasesWith3Notes: {\r\n      name: '% Cases with 3+ Notes',\r\n      unit: '%',\r\n      description: 'Percentage of cases with 3 or more notes',\r\n      target: '< 2%',\r\n      good: (value: number) => value < 2\r\n    },\r\n    rdsMonthlyAvgDays: {\r\n      name: 'RDS Monthly Avg Days',\r\n      unit: 'days',\r\n      description: 'RDS (Repair Duration Summary) monthly average',\r\n      target: '< 7 days',\r\n      good: (value: number) => value < 7\r\n    },\r\n    smYtdDwellAvgDays: {\r\n      name: 'SM YTD Dwell Avg Days',\r\n      unit: 'days',\r\n      description: 'Service management year-to-date dwell average',\r\n      target: '< 6 days',\r\n      good: (value: number) => value < 6\r\n    },\r\n    rdsYtdDwellAvgDays: {\r\n      name: 'RDS YTD Dwell Avg Days',\r\n      unit: 'days',\r\n      description: 'RDS year-to-date dwell time average',\r\n      target: '< 6 days',\r\n      good: (value: number) => value < 6\r\n    }\r\n  };\r\n\r\n  const getTrendIcon = (trend: string) => {\r\n    switch (trend) {\r\n      case 'up':\r\n        return <TrendingUp className=\"w-4 h-4 text-green-400\" />;\r\n      case 'down':\r\n        return <TrendingDown className=\"w-4 h-4 text-red-400\" />;\r\n      default:\r\n        return <BarChart3 className=\"w-4 h-4 text-yellow-400\" />;\r\n    }\r\n  };\r\n\r\n  const getLocationColor = (locationName: string) => {\r\n    const location = locations.find(loc => \r\n      loc.name.toLowerCase() === locationName.toLowerCase()\r\n    );\r\n    return location?.color || 'from-slate-500 to-slate-600';\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-8\">\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\">\r\n          Location Performance Metrics\r\n        </h1>\r\n        <p className=\"text-xl text-slate-300\">\r\n          Compare performance across all WKI service locations\r\n        </p>\r\n      </div>\r\n\r\n      {/* Show message when no legitimate scorecard data is available */}\r\n      {!isLoading && backendMetrics.length === 0 && (\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\">\r\n          <div className=\"text-6xl mb-4\">üìä</div>\r\n          <h2 className=\"text-2xl font-bold text-white mb-4\">No Scorecard Data Available</h2>\r\n          <p className=\"text-slate-300 mb-6\">\r\n            No W370 Service Scorecard data has been uploaded yet. Upload a legitimate scorecard PDF to view location metrics.\r\n          </p>\r\n          <Link \r\n            to=\"/upload-scorecard\" \r\n            className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200\"\r\n          >\r\n            Upload Scorecard\r\n          </Link>\r\n        </div>\r\n      )}\r\n\r\n      {/* Show loading state */}\r\n      {isLoading && (\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\">\r\n          <div className=\"text-4xl mb-4\">‚è≥</div>\r\n          <p className=\"text-slate-300\">Loading scorecard data...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Show content only when legitimate data exists */}\r\n      {!isLoading && backendMetrics.length > 0 && (\r\n        <>\r\n          {/* Dealership Summary */}\r\n          {dealershipMetrics && (\r\n            <div className=\"bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800 rounded-2xl p-6 mb-8 border border-blue-700 shadow-2xl\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg\">\r\n                    <Building className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">Dealership Summary</h2>\r\n                    <p className=\"text-blue-200\">Overall WKI performance metrics</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={fetchData}\r\n                  disabled={isLoading}\r\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\"\r\n                >\r\n                  <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n                  <span>Refresh</span>\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">Triage Hours</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.triageHours < 2 ? 'bg-green-500' : dealershipMetrics.triageHours < 4 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.triageHours} hrs</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &lt; 2 hrs</div>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">Triage % &lt; 4 Hours</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.triagePercentLess4Hours > 80 ? 'bg-green-500' : dealershipMetrics.triagePercentLess4Hours > 60 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.triagePercentLess4Hours}%</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &gt; 80%</div>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">% Cases with 3+ Notes</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.percentCasesWith3Notes < 2 ? 'bg-green-500' : dealershipMetrics.percentCasesWith3Notes < 5 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.percentCasesWith3Notes}%</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &lt; 2%</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {lastUpdated && (\r\n                <div className=\"mt-4 text-xs text-blue-200 text-center\">\r\n                  Last updated: {lastUpdated}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Filters */}\r\n          <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-3 sm:p-6 mb-6 sm:mb-8 border border-slate-700 shadow-2xl\">\r\n            <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-4 items-stretch sm:items-center justify-between\">\r\n              <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4\">\r\n            <Filter className=\"w-5 h-5 text-red-400\" />\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">Location</label>\r\n              <select\r\n                value={selectedLocation}\r\n                onChange={(e) => setSelectedLocation(e.target.value)}\r\n                className=\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\"\r\n              >\r\n                <option value=\"all\">All Locations</option>\r\n                {locations.map(location => (\r\n                  <option key={location.id} value={location.id}>{location.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">Focus Metric</label>\r\n              <select\r\n                value={selectedMetric}\r\n                onChange={(e) => setSelectedMetric(e.target.value)}\r\n                className=\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\"\r\n              >\r\n                {Object.entries(metricDefinitions).map(([key, def]) => (\r\n                  <option key={key} value={key}>{def.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-slate-400 text-sm\">Latest Data</p>\r\n            <p className=\"text-white font-semibold flex items-center\">\r\n              <Calendar className=\"w-4 h-4 mr-1\" />\r\n              July 2025\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metric Overview Cards */}\r\n      <div className=\"overflow-x-auto pb-2\">\r\n        <div className=\"grid grid-cols-2 min-w-[400px] sm:min-w-0 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8\">\r\n          {Object.entries(metricDefinitions).map(([key, def]) => {\r\n            const avgValue = filteredMetrics.reduce((sum, m) =>\r\n              sum + (m.metrics as any)[key], 0\r\n            ) / filteredMetrics.length;\r\n            const isGood = def.good(avgValue);\r\n\r\n            return (\r\n              <div key={key} className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-3 sm:p-6 border border-slate-700\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-white font-semibold text-sm\">{def.name}</h3>\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                    isGood ? 'bg-green-900 text-green-300' : 'bg-red-900 text-red-300'\r\n                  }`}>\r\n                    {def.target}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-white mb-1\">\r\n                  {avgValue.toFixed(1)}{def.unit}\r\n                </div>\r\n                <p className=\"text-slate-400 text-xs\">{def.description}</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Location Performance Cards */}\r\n      <div className=\"grid gap-4 sm:gap-6\">\r\n        {filteredMetrics.map((locationData) => (\r\n          <div key={`${locationData.location}-${locationData.month}`}\r\n            className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\">\r\n\r\n            {/* Location Header */}\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-8 gap-2\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className={`w-16 h-16 bg-gradient-to-br ${getLocationColor(locationData.location)} rounded-full flex items-center justify-center shadow-lg`}>\r\n                  <MapPin className=\"w-8 h-8 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-white\">{locationData.location}</h2>\r\n                  <p className=\"text-slate-400 flex items-center\">\r\n                    <Calendar className=\"w-4 h-4 mr-1\" />\r\n                    {locationData.month} {locationData.year}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                {getTrendIcon(locationData.trend)}\r\n                <span className=\"text-slate-300 capitalize\">{locationData.trend} trend</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Metrics Grid */}\r\n            <div className=\"overflow-x-auto pb-2\">\r\n              <div className=\"grid grid-cols-2 min-w-[350px] sm:min-w-0 md:grid-cols-4 gap-2 sm:gap-6\">\r\n                {Object.entries(locationData.metrics).map(([key, value]) => {\r\n                  const def = metricDefinitions[key as keyof typeof metricDefinitions];\r\n                  const isGood = def.good(value);\r\n                  const isSelected = key === selectedMetric;\r\n\r\n                  return (\r\n                    <div key={key}\r\n                      className={`p-2 sm:p-4 rounded-lg border transition-all ${\r\n                        isSelected\r\n                          ? 'border-red-500 bg-red-500/10 shadow-lg'\r\n                          : 'border-slate-700 bg-slate-800/50'\r\n                      }`}>\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <h4 className=\"text-slate-300 text-sm font-medium\">{def.name}</h4>\r\n                        <span className={`w-3 h-3 rounded-full ${\r\n                          isGood ? 'bg-green-500' : 'bg-red-500'\r\n                        }`}></span>\r\n                      </div>\r\n                      <div className={`text-base sm:text-xl font-bold ${\r\n                        isGood ? 'text-green-400' : 'text-red-400'\r\n                      }`}>\r\n                        {value.toFixed(1)}{def.unit}\r\n                      </div>\r\n                      <div className=\"text-xs text-slate-400 mt-1\">\r\n                        Target: {def.target}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Performance Summary */}\r\n      <div className=\"mt-6 sm:mt-8 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\">\r\n        <h3 className=\"text-2xl font-bold text-white mb-6\">Performance Summary</h3>\r\n        <div className=\"grid md:grid-cols-3 gap-6\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-green-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'up').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Improving</p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-yellow-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'stable').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Stable</p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-red-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'down').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Need Attention</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}