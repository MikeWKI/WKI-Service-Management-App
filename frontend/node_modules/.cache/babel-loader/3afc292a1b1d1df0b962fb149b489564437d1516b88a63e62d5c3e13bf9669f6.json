{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Target,TrendingDown,AlertTriangle,CheckCircle,Award,BarChart3,ArrowLeft,RefreshCw}from'lucide-react';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Backend API base URL\nconst API_BASE_URL='https://wki-service-management-app.onrender.com';// Helper function to determine status based on performance vs national and goal\nconst getStatusFromScores=function(locationScore,nationalScore){let goal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;if(locationScore>=goal)return'excellent';if(locationScore>=nationalScore*0.9)return'good';if(locationScore>=nationalScore*0.7)return'warning';return'critical';};// Helper function to create campaign metrics from location data\nconst createCampaignMetricsFromLocations=backendData=>{try{let dealership,locations=[],extractedAt;// Handle different response structures\nif(backendData&&typeof backendData==='object'){if('dealership'in backendData&&'locations'in backendData){({dealership,locations,extractedAt}=backendData);}else if('data'in backendData&&backendData.data&&typeof backendData.data==='object'){if('dealership'in backendData.data&&'locations'in backendData.data){({dealership,locations,extractedAt}=backendData.data);}}}if(!locations||locations.length===0){return null;}// Use actual campaign data from PDF parsing if available\nconst campaignLocations=locations.map(location=>{var _location$vscCaseRequ,_location$vscCaseRequ2,_location$triagePerce,_location$triagePerce2,_location$percentCase,_location$percentCase2,_location$ttActivatio,_location$ttActivatio2;// If the location has campaign data from PDF parsing, use it\nif(location.campaigns&&location.campaigns.length>0){const overallScore=location.campaigns.reduce((sum,camp)=>sum+camp.locationScore,0)/location.campaigns.length;return{locationName:location.name,campaigns:location.campaigns.map(campaign=>({id:campaign.campaignId,name:campaign.campaignName,locationScore:campaign.locationScore,nationalScore:campaign.nationalScore,goal:campaign.goal,status:campaign.status||getStatusFromScores(campaign.locationScore,campaign.nationalScore,campaign.goal)})),overallScore};}// Fallback: Create derived campaigns from service metrics (for backwards compatibility)\nconst campaigns=[{id:'vsc-compliance',name:'VSC Compliance Campaign',locationScore:parseFloat((_location$vscCaseRequ=location.vscCaseRequirements)===null||_location$vscCaseRequ===void 0?void 0:_location$vscCaseRequ.toString().replace('%',''))||0,nationalScore:85,// National average benchmark\ngoal:95,status:getStatusFromScores(parseFloat((_location$vscCaseRequ2=location.vscCaseRequirements)===null||_location$vscCaseRequ2===void 0?void 0:_location$vscCaseRequ2.toString().replace('%',''))||0,85,95)},{id:'triage-efficiency',name:'Triage Efficiency Campaign',locationScore:parseFloat((_location$triagePerce=location.triagePercentLess4Hours)===null||_location$triagePerce===void 0?void 0:_location$triagePerce.toString().replace('%',''))||0,nationalScore:75,// National average benchmark\ngoal:80,status:getStatusFromScores(parseFloat((_location$triagePerce2=location.triagePercentLess4Hours)===null||_location$triagePerce2===void 0?void 0:_location$triagePerce2.toString().replace('%',''))||0,75,80)},{id:'case-quality',name:'Case Quality Campaign',locationScore:Math.max(0,100-(parseFloat((_location$percentCase=location.percentCasesWith3Notes)===null||_location$percentCase===void 0?void 0:_location$percentCase.toString().replace('%',''))||0)),nationalScore:95,// Inverted metric - fewer notes is better\ngoal:98,status:getStatusFromScores(Math.max(0,100-(parseFloat((_location$percentCase2=location.percentCasesWith3Notes)===null||_location$percentCase2===void 0?void 0:_location$percentCase2.toString().replace('%',''))||0)),95,98)},{id:'tech-activation',name:'TT+ Activation Campaign',locationScore:parseFloat((_location$ttActivatio=location.ttActivation)===null||_location$ttActivatio===void 0?void 0:_location$ttActivatio.toString().replace('%',''))||0,nationalScore:85,// National average benchmark\ngoal:90,status:getStatusFromScores(parseFloat((_location$ttActivatio2=location.ttActivation)===null||_location$ttActivatio2===void 0?void 0:_location$ttActivatio2.toString().replace('%',''))||0,85,90)}];const overallScore=campaigns.reduce((sum,camp)=>sum+camp.locationScore,0)/campaigns.length;return{locationName:location.name,campaigns,overallScore};});return{locations:campaignLocations,extractedAt:extractedAt||new Date().toISOString()};}catch(error){console.error('Error creating campaign data from locations:',error);return null;}};// Note: Campaign data should come from legitimate scorecard uploads\n// Mock data removed - only show real data\nconst getStatusColor=status=>{switch(status){case'excellent':return'from-green-600 to-green-700 border-green-500';case'good':return'from-blue-600 to-blue-700 border-blue-500';case'warning':return'from-yellow-600 to-yellow-700 border-yellow-500';case'critical':return'from-red-600 to-red-700 border-red-500';default:return'from-gray-600 to-gray-700 border-gray-500';}};const getStatusIcon=status=>{switch(status){case'excellent':return/*#__PURE__*/_jsx(Award,{className:\"w-5 h-5 text-green-300\"});case'good':return/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-blue-300\"});case'warning':return/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-yellow-300\"});case'critical':return/*#__PURE__*/_jsx(TrendingDown,{className:\"w-5 h-5 text-red-300\"});default:return/*#__PURE__*/_jsx(BarChart3,{className:\"w-5 h-5 text-gray-300\"});}};export default function CampaignMetrics(){const[campaignData,setCampaignData]=useState(null);const[isLoading,setIsLoading]=useState(true);const[selectedLocation,setSelectedLocation]=useState('all');const[lastUpdated,setLastUpdated]=useState(null);// Fetch campaign data from backend and local storage\nconst fetchCampaignData=useCallback(async()=>{setIsLoading(true);try{// First, check if we have locally parsed campaign data\nconst localCampaignData=localStorage.getItem('campaignData');if(localCampaignData){try{const parsedLocalData=JSON.parse(localCampaignData);console.log('Found local campaign data:',parsedLocalData);if(parsedLocalData&&parsedLocalData.locations){// Convert local data to the expected format\nconst campaignMetrics={locations:parsedLocalData.locations.map(location=>({locationName:location.locationName,campaigns:location.campaigns||[],overallScore:location.campaigns?location.campaigns.reduce((sum,camp)=>sum+camp.locationScore,0)/location.campaigns.length:0})),extractedAt:parsedLocalData.extractedAt};setCampaignData(campaignMetrics);setLastUpdated(new Date(parsedLocalData.extractedAt).toLocaleString());setIsLoading(false);return;}}catch(localParseError){console.warn('Error parsing local campaign data:',localParseError);}}// Fallback to backend data\nconsole.log('No local campaign data found, fetching from backend...');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/locationMetrics\"));if(response.ok){const data=await response.json();console.log('Raw backend data for campaigns:',data);const parsedData=createCampaignMetricsFromLocations(data);console.log('Parsed campaign data:',parsedData);if(parsedData){setCampaignData(parsedData);setLastUpdated(new Date(parsedData.extractedAt).toLocaleString());}else{// No legitimate campaign data available\nsetCampaignData(null);setLastUpdated(null);}}else{// No legitimate campaign data available\nsetCampaignData(null);setLastUpdated(null);}}catch(error){console.error('Error fetching campaign data:',error);// No legitimate campaign data available\nsetCampaignData(null);setLastUpdated(null);}finally{setIsLoading(false);}},[]);useEffect(()=>{fetchCampaignData();// Listen for scorecard upload events to refresh campaign data\nconst handleScorecardUploaded=()=>{console.log('Scorecard uploaded event received, refreshing campaign data...');fetchCampaignData();};window.addEventListener('scorecardUploaded',handleScorecardUploaded);return()=>{window.removeEventListener('scorecardUploaded',handleScorecardUploaded);};},[fetchCampaignData]);// Auto-refresh data every 30 seconds to catch new uploads\nuseEffect(()=>{const interval=setInterval(fetchCampaignData,30000);return()=>clearInterval(interval);},[fetchCampaignData]);// Listen for scorecard upload events for immediate refresh\nuseEffect(()=>{const handleScorecardUpload=()=>{console.log('CampaignMetrics: New scorecard uploaded, refreshing data...');fetchCampaignData();};window.addEventListener('scorecardUploaded',handleScorecardUpload);return()=>{window.removeEventListener('scorecardUploaded',handleScorecardUpload);};},[fetchCampaignData]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400\",children:\"Loading campaign metrics...\"})]})});}// Show empty state when no legitimate campaign data is available\nif(!campaignData){return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center mb-8\",children:/*#__PURE__*/_jsxs(Link,{to:\"/metrics\",className:\"flex items-center text-red-400 hover:text-red-300 mr-4 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:24,className:\"mr-2\"}),\"Back to Metrics\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\",children:\"Campaign Completion Metrics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-slate-300\",children:\"Track campaign completion rates across all locations\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"No Campaign Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 mb-6\",children:\"Campaign completion metrics from the W370 Service Scorecard will appear once data is uploaded and processed. This includes actual campaign completion rates by location and national benchmarks from page 1 of the scorecard.\"})]})]});}const filteredLocations=selectedLocation==='all'?campaignData.locations:campaignData.locations.filter(loc=>loc.locationName.toLowerCase().replace(/\\s+/g,'-')===selectedLocation);// Calculate overall statistics\nconst allCampaigns=campaignData.locations.flatMap(loc=>loc.campaigns);const totalCampaigns=allCampaigns.length;const excellentCount=allCampaigns.filter(c=>c.status==='excellent').length;const criticalCount=allCampaigns.filter(c=>c.status==='critical').length;const avgScore=allCampaigns.reduce((sum,c)=>sum+c.locationScore,0)/totalCampaigns;return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsxs(Link,{to:\"/metrics\",className:\"flex items-center text-red-400 hover:text-red-300 mr-6 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:24,className:\"mr-2\"}),\"Back to Metrics\"]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchCampaignData,disabled:isLoading,className:\"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 \".concat(isLoading?'animate-spin':'')}),/*#__PURE__*/_jsx(\"span\",{children:\"Refresh\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\",children:\"Campaign Completion Metrics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-slate-300 mb-2\",children:\"Service Campaign Performance Tracking\"}),lastUpdated&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400\",children:[\"Last Updated: \",lastUpdated]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-8 h-8 text-blue-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-white\",children:totalCampaigns})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 font-medium\",children:\"Total Campaigns\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Across all locations\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(Award,{className:\"w-8 h-8 text-green-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-green-400\",children:excellentCount})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 font-medium\",children:\"At Goal (100%)\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 text-sm\",children:[(excellentCount/totalCampaigns*100).toFixed(1),\"% of campaigns\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(TrendingDown,{className:\"w-8 h-8 text-red-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-red-400\",children:criticalCount})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 font-medium\",children:\"Critical Performance\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 text-sm\",children:[(criticalCount/totalCampaigns*100).toFixed(1),\"% need attention\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-8 h-8 text-yellow-400\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-white\",children:[avgScore.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 font-medium\",children:\"Average Score\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Overall completion rate\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-300 font-medium mr-4\",children:\"Filter by Location:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedLocation('all'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(selectedLocation==='all'?'bg-red-600 text-white':'bg-slate-700 text-slate-300 hover:bg-slate-600'),children:\"All Locations\"}),campaignData.locations.map(location=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedLocation(location.locationName.toLowerCase().replace(/\\s+/g,'-')),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(selectedLocation===location.locationName.toLowerCase().replace(/\\s+/g,'-')?'bg-red-600 text-white':'bg-slate-700 text-slate-300 hover:bg-slate-600'),children:location.locationName.replace(' Kenworth','')},location.locationName))]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-8\",children:filteredLocations.map(location=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-6 border border-slate-700 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-2\",children:location.locationName}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400\",children:[\"Overall Score: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold \".concat(location.overallScore>=80?'text-green-400':location.overallScore>=60?'text-yellow-400':'text-red-400'),children:[location.overallScore.toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Campaigns\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-white\",children:location.campaigns.length})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:location.campaigns.map(campaign=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r \".concat(getStatusColor(campaign.status),\" rounded-xl p-4 border-2\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[getStatusIcon(campaign.status),/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-semibold ml-2 text-sm\",children:campaign.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80\",children:\"Location Score\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-white\",children:[campaign.locationScore,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80\",children:\"National Average\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold text-white/90\",children:[campaign.nationalScore,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80\",children:\"Goal\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold text-white/90\",children:[campaign.goal,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/20 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-full h-2 transition-all duration-500\",style:{width:\"\".concat(Math.min(campaign.locationScore,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-white/70 mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"0%\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Goal: \",campaign.goal,\"%\"]})]})]})]})})},campaign.id))})]},location.locationName))})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Target","TrendingDown","AlertTriangle","CheckCircle","Award","BarChart3","ArrowLeft","RefreshCw","Link","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","getStatusFromScores","locationScore","nationalScore","goal","arguments","length","undefined","createCampaignMetricsFromLocations","backendData","dealership","locations","extractedAt","data","campaignLocations","map","location","_location$vscCaseRequ","_location$vscCaseRequ2","_location$triagePerce","_location$triagePerce2","_location$percentCase","_location$percentCase2","_location$ttActivatio","_location$ttActivatio2","campaigns","overallScore","reduce","sum","camp","locationName","name","campaign","id","campaignId","campaignName","status","parseFloat","vscCaseRequirements","toString","replace","triagePercentLess4Hours","Math","max","percentCasesWith3Notes","ttActivation","Date","toISOString","error","console","getStatusColor","getStatusIcon","className","CampaignMetrics","campaignData","setCampaignData","isLoading","setIsLoading","selectedLocation","setSelectedLocation","lastUpdated","setLastUpdated","fetchCampaignData","localCampaignData","localStorage","getItem","parsedLocalData","JSON","parse","log","campaignMetrics","toLocaleString","localParseError","warn","response","fetch","concat","ok","json","parsedData","handleScorecardUploaded","window","addEventListener","removeEventListener","interval","setInterval","clearInterval","handleScorecardUpload","children","to","size","filteredLocations","filter","loc","toLowerCase","allCampaigns","flatMap","totalCampaigns","excellentCount","c","criticalCount","avgScore","onClick","disabled","toFixed","style","width","min"],"sources":["C:/Users/michaela/service-management-app/frontend/src/components/CampaignMetrics.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Target, TrendingUp, TrendingDown, AlertTriangle, CheckCircle, Award, BarChart3, ArrowLeft, RefreshCw } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface CampaignData {\r\n  id: string;\r\n  name: string;\r\n  locationScore: number;\r\n  nationalScore: number;\r\n  goal: number;\r\n  status: 'excellent' | 'good' | 'warning' | 'critical';\r\n}\r\n\r\ninterface LocationCampaignData {\r\n  locationName: string;\r\n  campaigns: CampaignData[];\r\n  overallScore: number;\r\n}\r\n\r\ninterface CampaignMetricsData {\r\n  locations: LocationCampaignData[];\r\n  extractedAt: string;\r\n}\r\n\r\n// Backend API base URL\r\nconst API_BASE_URL = 'https://wki-service-management-app.onrender.com';\r\n\r\n// Helper function to determine status based on performance vs national and goal\r\nconst getStatusFromScores = (locationScore: number, nationalScore: number, goal: number = 100): 'excellent' | 'good' | 'warning' | 'critical' => {\r\n  if (locationScore >= goal) return 'excellent';\r\n  if (locationScore >= nationalScore * 0.9) return 'good';\r\n  if (locationScore >= nationalScore * 0.7) return 'warning';\r\n  return 'critical';\r\n};\r\n\r\n// Helper function to create campaign metrics from location data\r\nconst createCampaignMetricsFromLocations = (backendData: any): CampaignMetricsData | null => {\r\n  try {\r\n    let dealership: any, locations: any[] = [], extractedAt: string | undefined;\r\n    \r\n    // Handle different response structures\r\n    if (backendData && typeof backendData === 'object') {\r\n      if ('dealership' in backendData && 'locations' in backendData) {\r\n        ({ dealership, locations, extractedAt } = backendData);\r\n      } else if ('data' in backendData && backendData.data && typeof backendData.data === 'object') {\r\n        if ('dealership' in backendData.data && 'locations' in backendData.data) {\r\n          ({ dealership, locations, extractedAt } = backendData.data);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!locations || locations.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    // Use actual campaign data from PDF parsing if available\r\n    const campaignLocations: LocationCampaignData[] = locations.map((location: any) => {\r\n      // If the location has campaign data from PDF parsing, use it\r\n      if (location.campaigns && location.campaigns.length > 0) {\r\n        const overallScore = location.campaigns.reduce((sum: number, camp: CampaignData) => sum + camp.locationScore, 0) / location.campaigns.length;\r\n        \r\n        return {\r\n          locationName: location.name,\r\n          campaigns: location.campaigns.map((campaign: any) => ({\r\n            id: campaign.campaignId,\r\n            name: campaign.campaignName,\r\n            locationScore: campaign.locationScore,\r\n            nationalScore: campaign.nationalScore,\r\n            goal: campaign.goal,\r\n            status: campaign.status || getStatusFromScores(campaign.locationScore, campaign.nationalScore, campaign.goal)\r\n          })),\r\n          overallScore\r\n        };\r\n      }\r\n      \r\n      // Fallback: Create derived campaigns from service metrics (for backwards compatibility)\r\n      const campaigns: CampaignData[] = [\r\n        {\r\n          id: 'vsc-compliance',\r\n          name: 'VSC Compliance Campaign',\r\n          locationScore: parseFloat(location.vscCaseRequirements?.toString().replace('%', '')) || 0,\r\n          nationalScore: 85, // National average benchmark\r\n          goal: 95,\r\n          status: getStatusFromScores(\r\n            parseFloat(location.vscCaseRequirements?.toString().replace('%', '')) || 0,\r\n            85,\r\n            95\r\n          )\r\n        },\r\n        {\r\n          id: 'triage-efficiency',\r\n          name: 'Triage Efficiency Campaign',\r\n          locationScore: parseFloat(location.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n          nationalScore: 75, // National average benchmark\r\n          goal: 80,\r\n          status: getStatusFromScores(\r\n            parseFloat(location.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n            75,\r\n            80\r\n          )\r\n        },\r\n        {\r\n          id: 'case-quality',\r\n          name: 'Case Quality Campaign',\r\n          locationScore: Math.max(0, 100 - (parseFloat(location.percentCasesWith3Notes?.toString().replace('%', '')) || 0)),\r\n          nationalScore: 95, // Inverted metric - fewer notes is better\r\n          goal: 98,\r\n          status: getStatusFromScores(\r\n            Math.max(0, 100 - (parseFloat(location.percentCasesWith3Notes?.toString().replace('%', '')) || 0)),\r\n            95,\r\n            98\r\n          )\r\n        },\r\n        {\r\n          id: 'tech-activation',\r\n          name: 'TT+ Activation Campaign',\r\n          locationScore: parseFloat(location.ttActivation?.toString().replace('%', '')) || 0,\r\n          nationalScore: 85, // National average benchmark\r\n          goal: 90,\r\n          status: getStatusFromScores(\r\n            parseFloat(location.ttActivation?.toString().replace('%', '')) || 0,\r\n            85,\r\n            90\r\n          )\r\n        }\r\n      ];\r\n\r\n      const overallScore = campaigns.reduce((sum, camp) => sum + camp.locationScore, 0) / campaigns.length;\r\n\r\n      return {\r\n        locationName: location.name,\r\n        campaigns,\r\n        overallScore\r\n      };\r\n    });\r\n\r\n    return {\r\n      locations: campaignLocations,\r\n      extractedAt: extractedAt || new Date().toISOString()\r\n    };\r\n  } catch (error) {\r\n    console.error('Error creating campaign data from locations:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Note: Campaign data should come from legitimate scorecard uploads\r\n// Mock data removed - only show real data\r\n\r\nconst getStatusColor = (status: string) => {\r\n  switch (status) {\r\n    case 'excellent':\r\n      return 'from-green-600 to-green-700 border-green-500';\r\n    case 'good':\r\n      return 'from-blue-600 to-blue-700 border-blue-500';\r\n    case 'warning':\r\n      return 'from-yellow-600 to-yellow-700 border-yellow-500';\r\n    case 'critical':\r\n      return 'from-red-600 to-red-700 border-red-500';\r\n    default:\r\n      return 'from-gray-600 to-gray-700 border-gray-500';\r\n  }\r\n};\r\n\r\nconst getStatusIcon = (status: string) => {\r\n  switch (status) {\r\n    case 'excellent':\r\n      return <Award className=\"w-5 h-5 text-green-300\" />;\r\n    case 'good':\r\n      return <CheckCircle className=\"w-5 h-5 text-blue-300\" />;\r\n    case 'warning':\r\n      return <AlertTriangle className=\"w-5 h-5 text-yellow-300\" />;\r\n    case 'critical':\r\n      return <TrendingDown className=\"w-5 h-5 text-red-300\" />;\r\n    default:\r\n      return <BarChart3 className=\"w-5 h-5 text-gray-300\" />;\r\n  }\r\n};\r\n\r\nexport default function CampaignMetrics() {\r\n  const [campaignData, setCampaignData] = useState<CampaignMetricsData | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedLocation, setSelectedLocation] = useState<string>('all');\r\n  const [lastUpdated, setLastUpdated] = useState<string | null>(null);\r\n\r\n  // Fetch campaign data from backend and local storage\r\n  const fetchCampaignData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // First, check if we have locally parsed campaign data\r\n      const localCampaignData = localStorage.getItem('campaignData');\r\n      if (localCampaignData) {\r\n        try {\r\n          const parsedLocalData = JSON.parse(localCampaignData);\r\n          console.log('Found local campaign data:', parsedLocalData);\r\n          \r\n          if (parsedLocalData && parsedLocalData.locations) {\r\n            // Convert local data to the expected format\r\n            const campaignMetrics: CampaignMetricsData = {\r\n              locations: parsedLocalData.locations.map((location: any) => ({\r\n                locationName: location.locationName,\r\n                campaigns: location.campaigns || [],\r\n                overallScore: location.campaigns ? \r\n                  location.campaigns.reduce((sum: number, camp: any) => sum + camp.locationScore, 0) / location.campaigns.length : 0\r\n              })),\r\n              extractedAt: parsedLocalData.extractedAt\r\n            };\r\n            \r\n            setCampaignData(campaignMetrics);\r\n            setLastUpdated(new Date(parsedLocalData.extractedAt).toLocaleString());\r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n        } catch (localParseError) {\r\n          console.warn('Error parsing local campaign data:', localParseError);\r\n        }\r\n      }\r\n      \r\n      // Fallback to backend data\r\n      console.log('No local campaign data found, fetching from backend...');\r\n      const response = await fetch(`${API_BASE_URL}/api/locationMetrics`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log('Raw backend data for campaigns:', data);\r\n        \r\n        const parsedData = createCampaignMetricsFromLocations(data);\r\n        console.log('Parsed campaign data:', parsedData);\r\n        \r\n        if (parsedData) {\r\n          setCampaignData(parsedData);\r\n          setLastUpdated(new Date(parsedData.extractedAt).toLocaleString());\r\n        } else {\r\n          // No legitimate campaign data available\r\n          setCampaignData(null);\r\n          setLastUpdated(null);\r\n        }\r\n      } else {\r\n        // No legitimate campaign data available\r\n        setCampaignData(null);\r\n        setLastUpdated(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching campaign data:', error);\r\n      // No legitimate campaign data available\r\n      setCampaignData(null);\r\n      setLastUpdated(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchCampaignData();\r\n    \r\n    // Listen for scorecard upload events to refresh campaign data\r\n    const handleScorecardUploaded = () => {\r\n      console.log('Scorecard uploaded event received, refreshing campaign data...');\r\n      fetchCampaignData();\r\n    };\r\n    \r\n    window.addEventListener('scorecardUploaded', handleScorecardUploaded);\r\n    \r\n    return () => {\r\n      window.removeEventListener('scorecardUploaded', handleScorecardUploaded);\r\n    };\r\n  }, [fetchCampaignData]);\r\n\r\n  // Auto-refresh data every 30 seconds to catch new uploads\r\n  useEffect(() => {\r\n    const interval = setInterval(fetchCampaignData, 30000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchCampaignData]);\r\n\r\n  // Listen for scorecard upload events for immediate refresh\r\n  useEffect(() => {\r\n    const handleScorecardUpload = () => {\r\n      console.log('CampaignMetrics: New scorecard uploaded, refreshing data...');\r\n      fetchCampaignData();\r\n    };\r\n\r\n    window.addEventListener('scorecardUploaded', handleScorecardUpload);\r\n    return () => {\r\n      window.removeEventListener('scorecardUploaded', handleScorecardUpload);\r\n    };\r\n  }, [fetchCampaignData]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4\"></div>\r\n          <p className=\"text-slate-400\">Loading campaign metrics...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show empty state when no legitimate campaign data is available\r\n  if (!campaignData) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <Link \r\n            to=\"/metrics\" \r\n            className=\"flex items-center text-red-400 hover:text-red-300 mr-4 transition-colors\"\r\n          >\r\n            <ArrowLeft size={24} className=\"mr-2\" />\r\n            Back to Metrics\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"text-center mb-8\">\r\n          <h1 className=\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\">\r\n            Campaign Completion Metrics\r\n          </h1>\r\n          <p className=\"text-xl text-slate-300\">\r\n            Track campaign completion rates across all locations\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\">\r\n          <div className=\"text-6xl mb-4\">📊</div>\r\n          <h2 className=\"text-2xl font-bold text-white mb-4\">No Campaign Data Available</h2>\r\n          <p className=\"text-slate-300 mb-6\">\r\n            Campaign completion metrics from the W370 Service Scorecard will appear once data is uploaded and processed. \r\n            This includes actual campaign completion rates by location and national benchmarks from page 1 of the scorecard.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filteredLocations = selectedLocation === 'all' \r\n    ? campaignData.locations \r\n    : campaignData.locations.filter(loc => \r\n        loc.locationName.toLowerCase().replace(/\\s+/g, '-') === selectedLocation\r\n      );\r\n\r\n  // Calculate overall statistics\r\n  const allCampaigns = campaignData.locations.flatMap(loc => loc.campaigns);\r\n  const totalCampaigns = allCampaigns.length;\r\n  const excellentCount = allCampaigns.filter(c => c.status === 'excellent').length;\r\n  const criticalCount = allCampaigns.filter(c => c.status === 'critical').length;\r\n  const avgScore = allCampaigns.reduce((sum, c) => sum + c.locationScore, 0) / totalCampaigns;\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center\">\r\n          <Link \r\n            to=\"/metrics\" \r\n            className=\"flex items-center text-red-400 hover:text-red-300 mr-6 transition-colors\"\r\n          >\r\n            <ArrowLeft size={24} className=\"mr-2\" />\r\n            Back to Metrics\r\n          </Link>\r\n        </div>\r\n        <button\r\n          onClick={fetchCampaignData}\r\n          disabled={isLoading}\r\n          className=\"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n          <span>Refresh</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\">\r\n          Campaign Completion Metrics\r\n        </h1>\r\n        <p className=\"text-xl text-slate-300 mb-2\">\r\n          Service Campaign Performance Tracking\r\n        </p>\r\n        {lastUpdated && (\r\n          <p className=\"text-slate-400\">\r\n            Last Updated: {lastUpdated}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Summary Statistics */}\r\n      <div className=\"grid md:grid-cols-4 gap-6 mb-8\">\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <Target className=\"w-8 h-8 text-blue-400\" />\r\n            <span className=\"text-2xl font-bold text-white\">{totalCampaigns}</span>\r\n          </div>\r\n          <p className=\"text-slate-300 font-medium\">Total Campaigns</p>\r\n          <p className=\"text-slate-400 text-sm\">Across all locations</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <Award className=\"w-8 h-8 text-green-400\" />\r\n            <span className=\"text-2xl font-bold text-green-400\">{excellentCount}</span>\r\n          </div>\r\n          <p className=\"text-slate-300 font-medium\">At Goal (100%)</p>\r\n          <p className=\"text-slate-400 text-sm\">{((excellentCount / totalCampaigns) * 100).toFixed(1)}% of campaigns</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <TrendingDown className=\"w-8 h-8 text-red-400\" />\r\n            <span className=\"text-2xl font-bold text-red-400\">{criticalCount}</span>\r\n          </div>\r\n          <p className=\"text-slate-300 font-medium\">Critical Performance</p>\r\n          <p className=\"text-slate-400 text-sm\">{((criticalCount / totalCampaigns) * 100).toFixed(1)}% need attention</p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-6 border border-slate-700\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <BarChart3 className=\"w-8 h-8 text-yellow-400\" />\r\n            <span className=\"text-2xl font-bold text-white\">{avgScore.toFixed(1)}%</span>\r\n          </div>\r\n          <p className=\"text-slate-300 font-medium\">Average Score</p>\r\n          <p className=\"text-slate-400 text-sm\">Overall completion rate</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Location Filter */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <span className=\"text-slate-300 font-medium mr-4\">Filter by Location:</span>\r\n            <button\r\n              onClick={() => setSelectedLocation('all')}\r\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                selectedLocation === 'all'\r\n                  ? 'bg-red-600 text-white'\r\n                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\r\n              }`}\r\n            >\r\n              All Locations\r\n            </button>\r\n            {campaignData.locations.map(location => (\r\n              <button\r\n                key={location.locationName}\r\n                onClick={() => setSelectedLocation(location.locationName.toLowerCase().replace(/\\s+/g, '-'))}\r\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n                  selectedLocation === location.locationName.toLowerCase().replace(/\\s+/g, '-')\r\n                    ? 'bg-red-600 text-white'\r\n                    : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\r\n                }`}\r\n              >\r\n                {location.locationName.replace(' Kenworth', '')}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Campaign Data by Location */}\r\n      <div className=\"space-y-8\">\r\n        {filteredLocations.map((location) => (\r\n          <div key={location.locationName} className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-6 border border-slate-700 shadow-2xl\">\r\n            {/* Location Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div>\r\n                <h2 className=\"text-2xl font-bold text-white mb-2\">{location.locationName}</h2>\r\n                <p className=\"text-slate-400\">\r\n                  Overall Score: <span className={`font-bold ${\r\n                    location.overallScore >= 80 ? 'text-green-400' : \r\n                    location.overallScore >= 60 ? 'text-yellow-400' : 'text-red-400'\r\n                  }`}>\r\n                    {location.overallScore.toFixed(1)}%\r\n                  </span>\r\n                </p>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-slate-400 text-sm\">Campaigns</p>\r\n                <p className=\"text-2xl font-bold text-white\">{location.campaigns.length}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Campaigns Grid */}\r\n            <div className=\"grid gap-4\">\r\n              {location.campaigns.map((campaign) => (\r\n                <div key={campaign.id} className={`bg-gradient-to-r ${getStatusColor(campaign.status)} rounded-xl p-4 border-2`}>\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center mb-2\">\r\n                        {getStatusIcon(campaign.status)}\r\n                        <h3 className=\"text-white font-semibold ml-2 text-sm\">{campaign.name}</h3>\r\n                      </div>\r\n                      \r\n                      <div className=\"grid grid-cols-3 gap-4 text-sm\">\r\n                        <div>\r\n                          <p className=\"text-white/80\">Location Score</p>\r\n                          <p className=\"text-2xl font-bold text-white\">{campaign.locationScore}%</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-white/80\">National Average</p>\r\n                          <p className=\"text-lg font-semibold text-white/90\">{campaign.nationalScore}%</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-white/80\">Goal</p>\r\n                          <p className=\"text-lg font-semibold text-white/90\">{campaign.goal}%</p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"mt-3\">\r\n                        <div className=\"bg-white/20 rounded-full h-2\">\r\n                          <div \r\n                            className=\"bg-white rounded-full h-2 transition-all duration-500\"\r\n                            style={{ width: `${Math.min(campaign.locationScore, 100)}%` }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"flex justify-between text-xs text-white/70 mt-1\">\r\n                          <span>0%</span>\r\n                          <span>Goal: {campaign.goal}%</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}