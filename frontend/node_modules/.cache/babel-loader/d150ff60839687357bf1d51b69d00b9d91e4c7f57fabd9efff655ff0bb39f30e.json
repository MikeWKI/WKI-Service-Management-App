{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{MapPin,TrendingUp,TrendingDown,BarChart3,Calendar,Filter,RefreshCw,Building}from'lucide-react';import{Link}from'react-router-dom';// Legitimate scorecard data interface - matches W370 Service Scorecard structure\n// Dealership-level metrics interface\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const locations=[{id:'wichita',name:'Wichita',color:'from-blue-500 to-blue-600'},{id:'emporia',name:'Emporia',color:'from-green-500 to-green-600'},{id:'dodge-city',name:'Dodge City',color:'from-purple-500 to-purple-600'},{id:'liberal',name:'Liberal',color:'from-orange-500 to-orange-600'}];export default function LocationMetrics(){const[selectedLocation,setSelectedLocation]=useState('all');const[selectedMetric,setSelectedMetric]=useState('vscCaseRequirements');const[backendMetrics,setBackendMetrics]=useState([]);const[dealershipMetrics,setDealershipMetrics]=useState(null);const[isLoading,setIsLoading]=useState(true);const[lastUpdated,setLastUpdated]=useState(null);// Backend API base URL\nconst API_BASE_URL='https://wki-service-management-app.onrender.com';// Helper function to fetch location metrics from trends endpoint\nconst fetchLocationMetricsFromTrends=async locationId=>{const metricsList=['vscCaseRequirements','vscClosedCorrectly','ttActivation','smMonthlyDwellAvg','smYtdDwellAvgDays','triagePercentLess4Hours','triageHours','etrPercentCases','percentCasesWith3Notes','rdsMonthlyAvgDays','rdsYtdDwellAvgDays'];const currentValues={};let hasAnyData=false;for(const metric of metricsList){try{const trendResponse=await fetch(\"\".concat(API_BASE_URL,\"/api/locationMetrics/trends/\").concat(locationId,\"/\").concat(metric));if(trendResponse.ok){const trendData=await trendResponse.json();if(trendData&&trendData.success&&trendData.data){const cv=trendData.data.currentValue;if(cv!==null&&cv!==undefined){currentValues[metric]=parseFloat(String(cv));hasAnyData=true;console.log(\"\\u2705 \".concat(locationId,\"/\").concat(metric,\": \").concat(cv));}}}}catch(err){console.error(\"Error fetching trend data for \".concat(locationId,\"/\").concat(metric,\":\"),err);}}return hasAnyData?currentValues:null;};// Helper function to get location name mapping\nconst getLocationNameMapping=locationId=>{const locationMap={'wichita':'Wichita Kenworth','emporia':'Emporia Kenworth','dodge-city':'Dodge City Kenworth','liberal':'Liberal Kenworth'};return locationMap[locationId]||locationId;};// Fetch data from backend\nconst fetchData=useCallback(async()=>{setIsLoading(true);try{console.log('LocationMetrics: Starting data fetch...');// OPTION 1: Try to fetch from trends endpoint first for all locations\nconst trendsPromises=locations.map(async location=>{const metricsFromTrends=await fetchLocationMetricsFromTrends(location.id);if(metricsFromTrends&&Object.keys(metricsFromTrends).length>0){return{location:location.name,month:'Latest',year:new Date().getFullYear(),metrics:{vscCaseRequirements:metricsFromTrends.vscCaseRequirements||0,vscClosedCorrectly:metricsFromTrends.vscClosedCorrectly||0,ttActivation:metricsFromTrends.ttActivation||0,smMonthlyDwellAvg:metricsFromTrends.smMonthlyDwellAvg||0,triageHours:metricsFromTrends.triageHours||0,triagePercentLess4Hours:metricsFromTrends.triagePercentLess4Hours||0,etrPercentCases:metricsFromTrends.etrPercentCases||0,percentCasesWith3Notes:metricsFromTrends.percentCasesWith3Notes||0,rdsMonthlyAvgDays:metricsFromTrends.rdsMonthlyAvgDays||0,smYtdDwellAvgDays:metricsFromTrends.smYtdDwellAvgDays||0,rdsYtdDwellAvgDays:metricsFromTrends.rdsYtdDwellAvgDays||0},trend:'stable'};}return null;});const trendsResults=await Promise.all(trendsPromises);const validTrendsResults=trendsResults.filter(result=>result!==null);if(validTrendsResults.length>0){console.log('LocationMetrics: Using trends data for',validTrendsResults.length,'locations');setBackendMetrics(validTrendsResults);setLastUpdated(new Date().toLocaleString());setIsLoading(false);return;}// OPTION 2: Fall back to original backend endpoint\nconsole.log('LocationMetrics: Trends endpoint failed, falling back to original logic...');const response=await fetch(\"\".concat(API_BASE_URL,\"/api/locationMetrics\"));if(response.ok){const data=await response.json();let dealership,locationsData=[],extractedAt;// Handle different response structures\nif(data&&typeof data==='object'){if('dealership'in data&&'locations'in data){({dealership,locations:locationsData,extractedAt}=data);}else if('data'in data&&data.data&&typeof data.data==='object'){if('dealership'in data.data&&'locations'in data.data){({dealership,locations:locationsData,extractedAt}=data.data);}}}if(locationsData&&locationsData.length>0){// Convert backend data to frontend format - only legitimate W370 scorecard fields\nconst convertedMetrics=locationsData.map(location=>{var _location$vscCaseRequ,_location$vscClosedCo,_location$ttActivatio,_location$triagePerce,_location$percentCase,_location$rdsMonthlyA;return{location:location.name,month:'Latest',year:new Date().getFullYear(),metrics:{vscCaseRequirements:parseFloat((_location$vscCaseRequ=location.vscCaseRequirements)===null||_location$vscCaseRequ===void 0?void 0:_location$vscCaseRequ.toString().replace('%',''))||0,vscClosedCorrectly:parseFloat((_location$vscClosedCo=location.vscClosedCorrectly)===null||_location$vscClosedCo===void 0?void 0:_location$vscClosedCo.toString().replace('%',''))||0,ttActivation:parseFloat((_location$ttActivatio=location.ttActivation)===null||_location$ttActivatio===void 0?void 0:_location$ttActivatio.toString().replace('%',''))||0,smMonthlyDwellAvg:parseFloat(location.smMonthlyDwellAvg)||0,triageHours:parseFloat(location.triageHours)||0,triagePercentLess4Hours:parseFloat((_location$triagePerce=location.triagePercentLess4Hours)===null||_location$triagePerce===void 0?void 0:_location$triagePerce.toString().replace('%',''))||0,etrPercentCases:parseFloat(location.etrPercentCases)||0,percentCasesWith3Notes:parseFloat((_location$percentCase=location.percentCasesWith3Notes)===null||_location$percentCase===void 0?void 0:_location$percentCase.toString().replace('%',''))||0,rdsMonthlyAvgDays:parseFloat((_location$rdsMonthlyA=location.rdsMonthlyAvgDays)===null||_location$rdsMonthlyA===void 0?void 0:_location$rdsMonthlyA.toString().replace('%',''))||0,smYtdDwellAvgDays:parseFloat(location.smYtdDwellAvgDays)||0,rdsYtdDwellAvgDays:parseFloat(location.rdsYtdDwellAvgDays)||0},trend:'stable'};});setBackendMetrics(convertedMetrics);}else{// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);}// Set dealership-level metrics if available\nif(dealership){var _dealership$triagePer,_dealership$percentCa;setDealershipMetrics({triageHours:parseFloat(dealership.triageHours)||0,triagePercentLess4Hours:parseFloat((_dealership$triagePer=dealership.triagePercentLess4Hours)===null||_dealership$triagePer===void 0?void 0:_dealership$triagePer.toString().replace('%',''))||0,percentCasesWith3Notes:parseFloat((_dealership$percentCa=dealership.percentCasesWith3Notes)===null||_dealership$percentCa===void 0?void 0:_dealership$percentCa.toString().replace('%',''))||0});}else{setDealershipMetrics(null);}if(extractedAt){setLastUpdated(new Date(extractedAt).toLocaleString());}}else{// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);setDealershipMetrics(null);}}catch(error){console.error('LocationMetrics: Error fetching metrics:',error);// No legitimate scorecard data available - show empty state\nsetBackendMetrics([]);setDealershipMetrics(null);}finally{setIsLoading(false);}},[]);// Fetch data on mount\nuseEffect(()=>{fetchData();},[fetchData]);// Auto-refresh data every 30 seconds to catch new uploads\nuseEffect(()=>{const interval=setInterval(fetchData,3000000);return()=>clearInterval(interval);},[fetchData]);// Listen for scorecard upload events for immediate refresh\nuseEffect(()=>{const handleScorecardUpload=()=>{console.log('LocationMetrics: New scorecard uploaded, refreshing data...');fetchData();};window.addEventListener('scorecardUploaded',handleScorecardUpload);return()=>{window.removeEventListener('scorecardUploaded',handleScorecardUpload);};},[fetchData]);const filteredMetrics=selectedLocation==='all'?backendMetrics:backendMetrics.filter(m=>m.location.toLowerCase().replace(/\\s+/g,'-')===selectedLocation);const metricDefinitions={vscCaseRequirements:{name:'VSC Case Requirements',unit:'%',description:'PACCAR VSC case requirements compliance',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},vscClosedCorrectly:{name:'VSC Closed Correctly',unit:'%',description:'PACCAR VSC cases closed with proper procedures',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},ttActivation:{name:'TT+ Activation',unit:'%',description:'TruckTech+ activation rate',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},smMonthlyDwellAvg:{name:'SM Monthly Dwell Average',unit:'days',description:'Service management monthly dwell time average',target:'< 3 days (goal)',good:value=>value<=1.5,// Green: 0-1.5 days\nwarning:value=>value<=2.9// Orange: 1.5-2.9 days\n// Red: >= 3 days\n},triageHours:{name:'SM Average Triage Hours',unit:'hours',description:'Average hours for case triage completion',target:'< 2 hours (goal)',good:value=>value<=1.5,// Green: 0-1.5 hours\nwarning:value=>value<2// Orange: 1.5-2 hours\n// Red: >= 2 hours\n},triagePercentLess4Hours:{name:'Triage % < 4 Hours',unit:'%',description:'Percentage of cases triaged within 4 hours',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},etrPercentCases:{name:'ETR % of Cases',unit:'%',description:'Estimated Time of Repair provided for cases',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},percentCasesWith3Notes:{name:'% Cases with 3+ Notes',unit:'%',description:'Percentage of cases with 3 or more notes (higher is better)',target:'100% (goal)',good:value=>value>=80,// Green: 80-100%\nwarning:value=>value>=60// Orange: 60-80%\n// Red: < 60%\n},rdsMonthlyAvgDays:{name:'RDS Monthly Avg Days',unit:'days',description:'RDS (Repair Duration Summary) monthly average',target:'< 3 days (goal)',good:value=>value<=1.5,// Green: 0-1.5 days\nwarning:value=>value<=2.9// Orange: 1.5-2.9 days\n// Red: >= 3 days\n},smYtdDwellAvgDays:{name:'SM YTD Dwell Avg Days',unit:'days',description:'Service management year-to-date dwell average',target:'< 3 days (goal)',good:value=>value<=1.5,// Green: 0-1.5 days\nwarning:value=>value<=2.9// Orange: 1.5-2.9 days\n// Red: >= 3 days\n},rdsYtdDwellAvgDays:{name:'RDS YTD Dwell Avg Days',unit:'days',description:'RDS year-to-date dwell time average',target:'< 3 days (goal)',good:value=>value<=1.5,// Green: 0-1.5 days\nwarning:value=>value<=2.9// Orange: 1.5-2.9 days\n// Red: >= 3 days\n}};const getTrendIcon=trend=>{switch(trend){case'up':return/*#__PURE__*/_jsx(TrendingUp,{className:\"w-4 h-4 text-green-400\"});case'down':return/*#__PURE__*/_jsx(TrendingDown,{className:\"w-4 h-4 text-red-400\"});default:return/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 text-yellow-400\"});}};const getLocationColor=locationName=>{const location=locations.find(loc=>loc.name.toLowerCase()===locationName.toLowerCase());return(location===null||location===void 0?void 0:location.color)||'from-slate-500 to-slate-600';};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\",children:\"Location Performance Metrics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-slate-300\",children:\"Compare performance across all WKI service locations\"})]}),!isLoading&&backendMetrics.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-4\",children:\"No Scorecard Data Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300 mb-6\",children:\"No W370 Service Scorecard data has been uploaded yet. Upload a legitimate scorecard PDF to view location metrics.\"}),/*#__PURE__*/_jsx(Link,{to:\"/upload-scorecard\",className:\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200\",children:\"Upload Scorecard\"})]}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-4\",children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Loading scorecard data...\"})]}),!isLoading&&backendMetrics.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[dealershipMetrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800 rounded-2xl p-6 mb-8 border border-blue-700 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Building,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Dealership Summary\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-200\",children:\"Overall WKI performance metrics\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchData,disabled:isLoading,className:\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 \".concat(isLoading?'animate-spin':'')}),/*#__PURE__*/_jsx(\"span\",{children:\"Refresh\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"Triage Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.triageHours<2?'bg-green-500':dealershipMetrics.triageHours<4?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.triageHours,\" hrs\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: < 2 hrs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"Triage % < 4 Hours\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.triagePercentLess4Hours>80?'bg-green-500':dealershipMetrics.triagePercentLess4Hours>60?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.triagePercentLess4Hours,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: > 80%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-slate-400\",children:\"% Cases with 3+ Notes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(dealershipMetrics.percentCasesWith3Notes<2?'bg-green-500':dealershipMetrics.percentCasesWith3Notes<5?'bg-yellow-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[dealershipMetrics.percentCasesWith3Notes,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-400\",children:\"Target: < 2%\"})]})]}),lastUpdated&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-xs text-blue-200 text-center\",children:[\"Last updated: \",lastUpdated]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-3 sm:p-6 mb-6 sm:mb-8 border border-slate-700 shadow-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-4 items-stretch sm:items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-5 h-5 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Location\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedLocation,onChange:e=>setSelectedLocation(e.target.value),className:\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Locations\"}),locations.map(location=>/*#__PURE__*/_jsx(\"option\",{value:location.id,children:location.name},location.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-slate-300 mb-1\",children:\"Focus Metric\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedMetric,onChange:e=>setSelectedMetric(e.target.value),className:\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\",children:Object.entries(metricDefinitions).map(_ref=>{let[key,def]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:def.name},key);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-sm\",children:\"Latest Data\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),\"August 2025\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 min-w-[400px] sm:min-w-0 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8\",children:Object.entries(metricDefinitions).map(_ref2=>{let[key,def]=_ref2;const avgValue=filteredMetrics.reduce((sum,m)=>sum+m.metrics[key],0)/filteredMetrics.length;const isGood=def.good(avgValue);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-3 sm:p-6 border border-slate-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-semibold text-sm\",children:def.name}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(isGood?'bg-green-900 text-green-300':'bg-red-900 text-red-300'),children:def.target})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[avgValue.toFixed(1),def.unit]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 text-xs\",children:def.description})]},key);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4 sm:gap-6\",children:filteredMetrics.map(locationData=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-8 gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br \".concat(getLocationColor(locationData.location),\" rounded-full flex items-center justify-center shadow-lg\"),children:/*#__PURE__*/_jsx(MapPin,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:locationData.location}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-slate-400 flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-1\"}),locationData.month,\" \",locationData.year]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[getTrendIcon(locationData.trend),/*#__PURE__*/_jsxs(\"span\",{className:\"text-slate-300 capitalize\",children:[locationData.trend,\" trend\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto pb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 min-w-[350px] sm:min-w-0 md:grid-cols-4 gap-2 sm:gap-6\",children:Object.entries(locationData.metrics).map(_ref3=>{let[key,value]=_ref3;const def=metricDefinitions[key];const isGood=def.good(value);const isSelected=key===selectedMetric;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 sm:p-4 rounded-lg border transition-all \".concat(isSelected?'border-red-500 bg-red-500/10 shadow-lg':'border-slate-700 bg-slate-800/50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-slate-300 text-sm font-medium\",children:def.name}),/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 rounded-full \".concat(isGood?'bg-green-500':'bg-red-500')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-base sm:text-xl font-bold \".concat(isGood?'text-green-400':'text-red-400'),children:[value.toFixed(1),def.unit]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-slate-400 mt-1\",children:[\"Target: \",def.target]})]},key);})})})]},\"\".concat(locationData.location,\"-\").concat(locationData.month)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 sm:mt-8 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-white mb-6\",children:\"Performance Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='up').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Improving\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-yellow-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='stable').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Stable\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-red-400 mb-2\",children:filteredMetrics.filter(m=>m.trend==='down').length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-300\",children:\"Locations Need Attention\"})]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","MapPin","TrendingUp","TrendingDown","BarChart3","Calendar","Filter","RefreshCw","Building","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","locations","id","name","color","LocationMetrics","selectedLocation","setSelectedLocation","selectedMetric","setSelectedMetric","backendMetrics","setBackendMetrics","dealershipMetrics","setDealershipMetrics","isLoading","setIsLoading","lastUpdated","setLastUpdated","API_BASE_URL","fetchLocationMetricsFromTrends","locationId","metricsList","currentValues","hasAnyData","metric","trendResponse","fetch","concat","ok","trendData","json","success","data","cv","currentValue","undefined","parseFloat","String","console","log","err","error","getLocationNameMapping","locationMap","fetchData","trendsPromises","map","location","metricsFromTrends","Object","keys","length","month","year","Date","getFullYear","metrics","vscCaseRequirements","vscClosedCorrectly","ttActivation","smMonthlyDwellAvg","triageHours","triagePercentLess4Hours","etrPercentCases","percentCasesWith3Notes","rdsMonthlyAvgDays","smYtdDwellAvgDays","rdsYtdDwellAvgDays","trend","trendsResults","Promise","all","validTrendsResults","filter","result","toLocaleString","response","dealership","locationsData","extractedAt","convertedMetrics","_location$vscCaseRequ","_location$vscClosedCo","_location$ttActivatio","_location$triagePerce","_location$percentCase","_location$rdsMonthlyA","toString","replace","_dealership$triagePer","_dealership$percentCa","interval","setInterval","clearInterval","handleScorecardUpload","window","addEventListener","removeEventListener","filteredMetrics","m","toLowerCase","metricDefinitions","unit","description","target","good","value","warning","getTrendIcon","className","getLocationColor","locationName","find","loc","children","to","onClick","disabled","onChange","e","entries","_ref","key","def","_ref2","avgValue","reduce","sum","isGood","toFixed","locationData","_ref3","isSelected"],"sources":["C:/Users/michaela/service-management-app/frontend/src/components/LocationMetrics.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { MapPin, TrendingUp, TrendingDown, BarChart3, Calendar, Filter, RefreshCw, Building } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Legitimate scorecard data interface - matches W370 Service Scorecard structure\r\ninterface LocationMetrics {\r\n  location: string;\r\n  month: string;\r\n  year: number;\r\n  metrics: {\r\n    // Only include metrics that actually exist in the W370 Service Scorecard\r\n    vscCaseRequirements: number;\r\n    vscClosedCorrectly: number;\r\n    ttActivation: number;\r\n    smMonthlyDwellAvg: number;\r\n    triageHours: number;\r\n    triagePercentLess4Hours: number;\r\n    etrPercentCases: number;\r\n    percentCasesWith3Notes: number;\r\n    rdsMonthlyAvgDays: number;\r\n    smYtdDwellAvgDays: number;\r\n    rdsYtdDwellAvgDays: number;\r\n  };\r\n  trend: 'up' | 'down' | 'stable';\r\n}\r\n\r\n// Dealership-level metrics interface\r\ninterface DealershipMetrics {\r\n  triageHours: number;\r\n  triagePercentLess4Hours: number;\r\n  percentCasesWith3Notes: number;\r\n}\r\n\r\nconst locations = [\r\n  { id: 'wichita', name: 'Wichita', color: 'from-blue-500 to-blue-600' },\r\n  { id: 'emporia', name: 'Emporia', color: 'from-green-500 to-green-600' },\r\n  { id: 'dodge-city', name: 'Dodge City', color: 'from-purple-500 to-purple-600' },\r\n  { id: 'liberal', name: 'Liberal', color: 'from-orange-500 to-orange-600' }\r\n];\r\n\r\nexport default function LocationMetrics() {\r\n  const [selectedLocation, setSelectedLocation] = useState('all');\r\n  const [selectedMetric, setSelectedMetric] = useState('vscCaseRequirements');\r\n  const [backendMetrics, setBackendMetrics] = useState<LocationMetrics[]>([]);\r\n  const [dealershipMetrics, setDealershipMetrics] = useState<DealershipMetrics | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [lastUpdated, setLastUpdated] = useState<string | null>(null);\r\n\r\n  // Backend API base URL\r\n  const API_BASE_URL = 'https://wki-service-management-app.onrender.com';\r\n\r\n  // Helper function to fetch location metrics from trends endpoint\r\n  const fetchLocationMetricsFromTrends = async (locationId: string): Promise<Partial<LocationMetrics['metrics']> | null> => {\r\n    const metricsList = [\r\n      'vscCaseRequirements',\r\n      'vscClosedCorrectly',\r\n      'ttActivation',\r\n      'smMonthlyDwellAvg',\r\n      'smYtdDwellAvgDays',\r\n      'triagePercentLess4Hours',\r\n      'triageHours',\r\n      'etrPercentCases',\r\n      'percentCasesWith3Notes',\r\n      'rdsMonthlyAvgDays',\r\n      'rdsYtdDwellAvgDays'\r\n    ];\r\n\r\n    const currentValues: Record<string, number> = {};\r\n    let hasAnyData = false;\r\n\r\n    for (const metric of metricsList) {\r\n      try {\r\n        const trendResponse = await fetch(`${API_BASE_URL}/api/locationMetrics/trends/${locationId}/${metric}`);\r\n        if (trendResponse.ok) {\r\n          const trendData = await trendResponse.json();\r\n          if (trendData && trendData.success && trendData.data) {\r\n            const cv = trendData.data.currentValue;\r\n            if (cv !== null && cv !== undefined) {\r\n              currentValues[metric] = parseFloat(String(cv));\r\n              hasAnyData = true;\r\n              console.log(`✅ ${locationId}/${metric}: ${cv}`);\r\n            }\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(`Error fetching trend data for ${locationId}/${metric}:`, err);\r\n      }\r\n    }\r\n\r\n    return hasAnyData ? currentValues as Partial<LocationMetrics['metrics']> : null;\r\n  };\r\n\r\n  // Helper function to get location name mapping\r\n  const getLocationNameMapping = (locationId: string): string => {\r\n    const locationMap: Record<string, string> = {\r\n      'wichita': 'Wichita Kenworth',\r\n      'emporia': 'Emporia Kenworth',\r\n      'dodge-city': 'Dodge City Kenworth',\r\n      'liberal': 'Liberal Kenworth'\r\n    };\r\n    return locationMap[locationId] || locationId;\r\n  };\r\n\r\n  // Fetch data from backend\r\n  const fetchData = useCallback(async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      console.log('LocationMetrics: Starting data fetch...');\r\n      \r\n      // OPTION 1: Try to fetch from trends endpoint first for all locations\r\n      const trendsPromises = locations.map(async (location) => {\r\n        const metricsFromTrends = await fetchLocationMetricsFromTrends(location.id);\r\n        if (metricsFromTrends && Object.keys(metricsFromTrends).length > 0) {\r\n          return {\r\n            location: location.name,\r\n            month: 'Latest',\r\n            year: new Date().getFullYear(),\r\n            metrics: {\r\n              vscCaseRequirements: metricsFromTrends.vscCaseRequirements || 0,\r\n              vscClosedCorrectly: metricsFromTrends.vscClosedCorrectly || 0,\r\n              ttActivation: metricsFromTrends.ttActivation || 0,\r\n              smMonthlyDwellAvg: metricsFromTrends.smMonthlyDwellAvg || 0,\r\n              triageHours: metricsFromTrends.triageHours || 0,\r\n              triagePercentLess4Hours: metricsFromTrends.triagePercentLess4Hours || 0,\r\n              etrPercentCases: metricsFromTrends.etrPercentCases || 0,\r\n              percentCasesWith3Notes: metricsFromTrends.percentCasesWith3Notes || 0,\r\n              rdsMonthlyAvgDays: metricsFromTrends.rdsMonthlyAvgDays || 0,\r\n              smYtdDwellAvgDays: metricsFromTrends.smYtdDwellAvgDays || 0,\r\n              rdsYtdDwellAvgDays: metricsFromTrends.rdsYtdDwellAvgDays || 0\r\n            },\r\n            trend: 'stable' as const\r\n          };\r\n        }\r\n        return null;\r\n      });\r\n\r\n      const trendsResults = await Promise.all(trendsPromises);\r\n      const validTrendsResults = trendsResults.filter(result => result !== null) as LocationMetrics[];\r\n\r\n      if (validTrendsResults.length > 0) {\r\n        console.log('LocationMetrics: Using trends data for', validTrendsResults.length, 'locations');\r\n        setBackendMetrics(validTrendsResults);\r\n        setLastUpdated(new Date().toLocaleString());\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // OPTION 2: Fall back to original backend endpoint\r\n      console.log('LocationMetrics: Trends endpoint failed, falling back to original logic...');\r\n      const response = await fetch(`${API_BASE_URL}/api/locationMetrics`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        let dealership: any, locationsData: any[] = [], extractedAt: string | undefined;\r\n        \r\n        // Handle different response structures\r\n        if (data && typeof data === 'object') {\r\n          if ('dealership' in data && 'locations' in data) {\r\n            ({ dealership, locations: locationsData, extractedAt } = data);\r\n          } else if ('data' in data && data.data && typeof data.data === 'object') {\r\n            if ('dealership' in data.data && 'locations' in data.data) {\r\n              ({ dealership, locations: locationsData, extractedAt } = data.data);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (locationsData && locationsData.length > 0) {\r\n          // Convert backend data to frontend format - only legitimate W370 scorecard fields\r\n          const convertedMetrics: LocationMetrics[] = locationsData.map((location: any) => ({\r\n            location: location.name,\r\n            month: 'Latest',\r\n            year: new Date().getFullYear(),\r\n            metrics: {\r\n              vscCaseRequirements: parseFloat(location.vscCaseRequirements?.toString().replace('%', '')) || 0,\r\n              vscClosedCorrectly: parseFloat(location.vscClosedCorrectly?.toString().replace('%', '')) || 0,\r\n              ttActivation: parseFloat(location.ttActivation?.toString().replace('%', '')) || 0,\r\n              smMonthlyDwellAvg: parseFloat(location.smMonthlyDwellAvg) || 0,\r\n              triageHours: parseFloat(location.triageHours) || 0,\r\n              triagePercentLess4Hours: parseFloat(location.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n              etrPercentCases: parseFloat(location.etrPercentCases) || 0,\r\n              percentCasesWith3Notes: parseFloat(location.percentCasesWith3Notes?.toString().replace('%', '')) || 0,\r\n              rdsMonthlyAvgDays: parseFloat(location.rdsMonthlyAvgDays?.toString().replace('%', '')) || 0,\r\n              smYtdDwellAvgDays: parseFloat(location.smYtdDwellAvgDays) || 0,\r\n              rdsYtdDwellAvgDays: parseFloat(location.rdsYtdDwellAvgDays) || 0\r\n            },\r\n            trend: 'stable' as const\r\n          }));\r\n          setBackendMetrics(convertedMetrics);\r\n        } else {\r\n          // No legitimate scorecard data available - show empty state\r\n          setBackendMetrics([]);\r\n        }\r\n\r\n        // Set dealership-level metrics if available\r\n        if (dealership) {\r\n          setDealershipMetrics({\r\n            triageHours: parseFloat(dealership.triageHours) || 0,\r\n            triagePercentLess4Hours: parseFloat(dealership.triagePercentLess4Hours?.toString().replace('%', '')) || 0,\r\n            percentCasesWith3Notes: parseFloat(dealership.percentCasesWith3Notes?.toString().replace('%', '')) || 0\r\n          });\r\n        } else {\r\n          setDealershipMetrics(null);\r\n        }\r\n\r\n        if (extractedAt) {\r\n          setLastUpdated(new Date(extractedAt).toLocaleString());\r\n        }\r\n      } else {\r\n        // No legitimate scorecard data available - show empty state\r\n        setBackendMetrics([]);\r\n        setDealershipMetrics(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('LocationMetrics: Error fetching metrics:', error);\r\n      // No legitimate scorecard data available - show empty state\r\n      setBackendMetrics([]);\r\n      setDealershipMetrics(null);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch data on mount\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  // Auto-refresh data every 30 seconds to catch new uploads\r\n  useEffect(() => {\r\n    const interval = setInterval(fetchData, 3000000);\r\n    return () => clearInterval(interval);\r\n  }, [fetchData]);\r\n\r\n  // Listen for scorecard upload events for immediate refresh\r\n  useEffect(() => {\r\n    const handleScorecardUpload = () => {\r\n      console.log('LocationMetrics: New scorecard uploaded, refreshing data...');\r\n      fetchData();\r\n    };\r\n\r\n    window.addEventListener('scorecardUploaded', handleScorecardUpload);\r\n    return () => {\r\n      window.removeEventListener('scorecardUploaded', handleScorecardUpload);\r\n    };\r\n  }, [fetchData]);\r\n  \r\n  const filteredMetrics = selectedLocation === 'all' \r\n    ? backendMetrics \r\n    : backendMetrics.filter(m => m.location.toLowerCase().replace(/\\s+/g, '-') === selectedLocation);\r\n\r\n  const metricDefinitions = {\r\n    vscCaseRequirements: {\r\n      name: 'VSC Case Requirements',\r\n      unit: '%',\r\n      description: 'PACCAR VSC case requirements compliance',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    vscClosedCorrectly: {\r\n      name: 'VSC Closed Correctly',\r\n      unit: '%',\r\n      description: 'PACCAR VSC cases closed with proper procedures',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    ttActivation: {\r\n      name: 'TT+ Activation',\r\n      unit: '%',\r\n      description: 'TruckTech+ activation rate',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    smMonthlyDwellAvg: {\r\n      name: 'SM Monthly Dwell Average',\r\n      unit: 'days',\r\n      description: 'Service management monthly dwell time average',\r\n      target: '< 3 days (goal)',\r\n      good: (value: number) => value <= 1.5,  // Green: 0-1.5 days\r\n      warning: (value: number) => value <= 2.9,  // Orange: 1.5-2.9 days\r\n      // Red: >= 3 days\r\n    },\r\n    triageHours: {\r\n      name: 'SM Average Triage Hours',\r\n      unit: 'hours',\r\n      description: 'Average hours for case triage completion',\r\n      target: '< 2 hours (goal)',\r\n      good: (value: number) => value <= 1.5,  // Green: 0-1.5 hours\r\n      warning: (value: number) => value < 2,  // Orange: 1.5-2 hours\r\n      // Red: >= 2 hours\r\n    },\r\n    triagePercentLess4Hours: {\r\n      name: 'Triage % < 4 Hours',\r\n      unit: '%',\r\n      description: 'Percentage of cases triaged within 4 hours',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    etrPercentCases: {\r\n      name: 'ETR % of Cases',\r\n      unit: '%',\r\n      description: 'Estimated Time of Repair provided for cases',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    percentCasesWith3Notes: {\r\n      name: '% Cases with 3+ Notes',\r\n      unit: '%',\r\n      description: 'Percentage of cases with 3 or more notes (higher is better)',\r\n      target: '100% (goal)',\r\n      good: (value: number) => value >= 80,  // Green: 80-100%\r\n      warning: (value: number) => value >= 60,  // Orange: 60-80%\r\n      // Red: < 60%\r\n    },\r\n    rdsMonthlyAvgDays: {\r\n      name: 'RDS Monthly Avg Days',\r\n      unit: 'days',\r\n      description: 'RDS (Repair Duration Summary) monthly average',\r\n      target: '< 3 days (goal)',\r\n      good: (value: number) => value <= 1.5,  // Green: 0-1.5 days\r\n      warning: (value: number) => value <= 2.9,  // Orange: 1.5-2.9 days\r\n      // Red: >= 3 days\r\n    },\r\n    smYtdDwellAvgDays: {\r\n      name: 'SM YTD Dwell Avg Days',\r\n      unit: 'days',\r\n      description: 'Service management year-to-date dwell average',\r\n      target: '< 3 days (goal)',\r\n      good: (value: number) => value <= 1.5,  // Green: 0-1.5 days\r\n      warning: (value: number) => value <= 2.9,  // Orange: 1.5-2.9 days\r\n      // Red: >= 3 days\r\n    },\r\n    rdsYtdDwellAvgDays: {\r\n      name: 'RDS YTD Dwell Avg Days',\r\n      unit: 'days',\r\n      description: 'RDS year-to-date dwell time average',\r\n      target: '< 3 days (goal)',\r\n      good: (value: number) => value <= 1.5,  // Green: 0-1.5 days\r\n      warning: (value: number) => value <= 2.9,  // Orange: 1.5-2.9 days\r\n      // Red: >= 3 days\r\n    }\r\n  };\r\n\r\n  const getTrendIcon = (trend: string) => {\r\n    switch (trend) {\r\n      case 'up':\r\n        return <TrendingUp className=\"w-4 h-4 text-green-400\" />;\r\n      case 'down':\r\n        return <TrendingDown className=\"w-4 h-4 text-red-400\" />;\r\n      default:\r\n        return <BarChart3 className=\"w-4 h-4 text-yellow-400\" />;\r\n    }\r\n  };\r\n\r\n  const getLocationColor = (locationName: string) => {\r\n    const location = locations.find(loc => \r\n      loc.name.toLowerCase() === locationName.toLowerCase()\r\n    );\r\n    return location?.color || 'from-slate-500 to-slate-600';\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-8\">\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-4xl font-bold bg-gradient-to-r from-red-600 to-red-700 bg-clip-text text-transparent mb-4\">\r\n          Location Performance Metrics\r\n        </h1>\r\n        <p className=\"text-xl text-slate-300\">\r\n          Compare performance across all WKI service locations\r\n        </p>\r\n      </div>\r\n\r\n      {/* Show message when no legitimate scorecard data is available */}\r\n      {!isLoading && backendMetrics.length === 0 && (\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\">\r\n          <div className=\"text-6xl mb-4\">📊</div>\r\n          <h2 className=\"text-2xl font-bold text-white mb-4\">No Scorecard Data Available</h2>\r\n          <p className=\"text-slate-300 mb-6\">\r\n            No W370 Service Scorecard data has been uploaded yet. Upload a legitimate scorecard PDF to view location metrics.\r\n          </p>\r\n          <Link \r\n            to=\"/upload-scorecard\" \r\n            className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200\"\r\n          >\r\n            Upload Scorecard\r\n          </Link>\r\n        </div>\r\n      )}\r\n\r\n      {/* Show loading state */}\r\n      {isLoading && (\r\n        <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl text-center\">\r\n          <div className=\"text-4xl mb-4\">⏳</div>\r\n          <p className=\"text-slate-300\">Loading scorecard data...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Show content only when legitimate data exists */}\r\n      {!isLoading && backendMetrics.length > 0 && (\r\n        <>\r\n          {/* Dealership Summary */}\r\n          {dealershipMetrics && (\r\n            <div className=\"bg-gradient-to-br from-blue-800 via-blue-900 to-blue-800 rounded-2xl p-6 mb-8 border border-blue-700 shadow-2xl\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg\">\r\n                    <Building className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"text-2xl font-bold text-white\">Dealership Summary</h2>\r\n                    <p className=\"text-blue-200\">Overall WKI performance metrics</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={fetchData}\r\n                  disabled={isLoading}\r\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\"\r\n                >\r\n                  <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\r\n                  <span>Refresh</span>\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">Triage Hours</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.triageHours < 2 ? 'bg-green-500' : dealershipMetrics.triageHours < 4 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.triageHours} hrs</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &lt; 2 hrs</div>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">Triage % &lt; 4 Hours</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.triagePercentLess4Hours > 80 ? 'bg-green-500' : dealershipMetrics.triagePercentLess4Hours > 60 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.triagePercentLess4Hours}%</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &gt; 80%</div>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-4 border border-slate-700\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-slate-400\">% Cases with 3+ Notes</h3>\r\n                    <div className={`w-3 h-3 rounded-full ${dealershipMetrics.percentCasesWith3Notes < 2 ? 'bg-green-500' : dealershipMetrics.percentCasesWith3Notes < 5 ? 'bg-yellow-500' : 'bg-red-500'}`}></div>\r\n                  </div>\r\n                  <div className=\"text-2xl font-bold text-white mb-1\">{dealershipMetrics.percentCasesWith3Notes}%</div>\r\n                  <div className=\"text-xs text-slate-400\">Target: &lt; 2%</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {lastUpdated && (\r\n                <div className=\"mt-4 text-xs text-blue-200 text-center\">\r\n                  Last updated: {lastUpdated}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Filters */}\r\n          <div className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-3 sm:p-6 mb-6 sm:mb-8 border border-slate-700 shadow-2xl\">\r\n            <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-4 items-stretch sm:items-center justify-between\">\r\n              <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4\">\r\n            <Filter className=\"w-5 h-5 text-red-400\" />\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">Location</label>\r\n              <select\r\n                value={selectedLocation}\r\n                onChange={(e) => setSelectedLocation(e.target.value)}\r\n                className=\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\"\r\n              >\r\n                <option value=\"all\">All Locations</option>\r\n                {locations.map(location => (\r\n                  <option key={location.id} value={location.id}>{location.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-300 mb-1\">Focus Metric</label>\r\n              <select\r\n                value={selectedMetric}\r\n                onChange={(e) => setSelectedMetric(e.target.value)}\r\n                className=\"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500\"\r\n              >\r\n                {Object.entries(metricDefinitions).map(([key, def]) => (\r\n                  <option key={key} value={key}>{def.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-slate-400 text-sm\">Latest Data</p>\r\n            <p className=\"text-white font-semibold flex items-center\">\r\n              <Calendar className=\"w-4 h-4 mr-1\" />\r\n              August 2025\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metric Overview Cards */}\r\n      <div className=\"overflow-x-auto pb-2\">\r\n        <div className=\"grid grid-cols-2 min-w-[400px] sm:min-w-0 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8\">\r\n          {Object.entries(metricDefinitions).map(([key, def]) => {\r\n            const avgValue = filteredMetrics.reduce((sum, m) =>\r\n              sum + (m.metrics as any)[key], 0\r\n            ) / filteredMetrics.length;\r\n            const isGood = def.good(avgValue);\r\n\r\n            return (\r\n              <div key={key} className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-xl p-3 sm:p-6 border border-slate-700\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h3 className=\"text-white font-semibold text-sm\">{def.name}</h3>\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                    isGood ? 'bg-green-900 text-green-300' : 'bg-red-900 text-red-300'\r\n                  }`}>\r\n                    {def.target}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-2xl font-bold text-white mb-1\">\r\n                  {avgValue.toFixed(1)}{def.unit}\r\n                </div>\r\n                <p className=\"text-slate-400 text-xs\">{def.description}</p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Location Performance Cards */}\r\n      <div className=\"grid gap-4 sm:gap-6\">\r\n        {filteredMetrics.map((locationData) => (\r\n          <div key={`${locationData.location}-${locationData.month}`}\r\n            className=\"bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\">\r\n\r\n            {/* Location Header */}\r\n            <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-8 gap-2\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className={`w-16 h-16 bg-gradient-to-br ${getLocationColor(locationData.location)} rounded-full flex items-center justify-center shadow-lg`}>\r\n                  <MapPin className=\"w-8 h-8 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-white\">{locationData.location}</h2>\r\n                  <p className=\"text-slate-400 flex items-center\">\r\n                    <Calendar className=\"w-4 h-4 mr-1\" />\r\n                    {locationData.month} {locationData.year}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                {getTrendIcon(locationData.trend)}\r\n                <span className=\"text-slate-300 capitalize\">{locationData.trend} trend</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Metrics Grid */}\r\n            <div className=\"overflow-x-auto pb-2\">\r\n              <div className=\"grid grid-cols-2 min-w-[350px] sm:min-w-0 md:grid-cols-4 gap-2 sm:gap-6\">\r\n                {Object.entries(locationData.metrics).map(([key, value]) => {\r\n                  const def = metricDefinitions[key as keyof typeof metricDefinitions];\r\n                  const isGood = def.good(value);\r\n                  const isSelected = key === selectedMetric;\r\n\r\n                  return (\r\n                    <div key={key}\r\n                      className={`p-2 sm:p-4 rounded-lg border transition-all ${\r\n                        isSelected\r\n                          ? 'border-red-500 bg-red-500/10 shadow-lg'\r\n                          : 'border-slate-700 bg-slate-800/50'\r\n                      }`}>\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <h4 className=\"text-slate-300 text-sm font-medium\">{def.name}</h4>\r\n                        <span className={`w-3 h-3 rounded-full ${\r\n                          isGood ? 'bg-green-500' : 'bg-red-500'\r\n                        }`}></span>\r\n                      </div>\r\n                      <div className={`text-base sm:text-xl font-bold ${\r\n                        isGood ? 'text-green-400' : 'text-red-400'\r\n                      }`}>\r\n                        {value.toFixed(1)}{def.unit}\r\n                      </div>\r\n                      <div className=\"text-xs text-slate-400 mt-1\">\r\n                        Target: {def.target}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Performance Summary */}\r\n      <div className=\"mt-6 sm:mt-8 bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-2xl p-4 sm:p-8 border border-slate-700 shadow-2xl\">\r\n        <h3 className=\"text-2xl font-bold text-white mb-6\">Performance Summary</h3>\r\n        <div className=\"grid md:grid-cols-3 gap-6\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-green-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'up').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Improving</p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-yellow-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'stable').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Stable</p>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-red-400 mb-2\">\r\n              {filteredMetrics.filter(m => m.trend === 'down').length}\r\n            </div>\r\n            <p className=\"text-slate-300\">Locations Need Attention</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}